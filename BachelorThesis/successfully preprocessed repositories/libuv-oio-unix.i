# 0 "oio-unix.c"
# 1 "/home/idefix/compilation/mounted/repository//"
# 0 "<built-in>"
# 0 "<command-line>"
# 1 "/usr/include/stdc-predef.h" 1 3 4
# 0 "<command-line>" 2
# 1 "oio-unix.c"
# 1 "oio.h" 1






# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stdint.h" 1 3 4
# 9 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stdint.h" 3 4
# 1 "/usr/include/stdint.h" 1 3 4
# 26 "/usr/include/stdint.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/libc-header-start.h" 1 3 4
# 33 "/usr/include/aarch64-linux-gnu/bits/libc-header-start.h" 3 4
# 1 "/usr/include/features.h" 1 3 4
# 392 "/usr/include/features.h" 3 4
# 1 "/usr/include/features-time64.h" 1 3 4
# 20 "/usr/include/features-time64.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/wordsize.h" 1 3 4
# 21 "/usr/include/features-time64.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/timesize.h" 1 3 4
# 22 "/usr/include/features-time64.h" 2 3 4
# 393 "/usr/include/features.h" 2 3 4
# 486 "/usr/include/features.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/sys/cdefs.h" 1 3 4
# 559 "/usr/include/aarch64-linux-gnu/sys/cdefs.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/wordsize.h" 1 3 4
# 560 "/usr/include/aarch64-linux-gnu/sys/cdefs.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/long-double.h" 1 3 4
# 561 "/usr/include/aarch64-linux-gnu/sys/cdefs.h" 2 3 4
# 487 "/usr/include/features.h" 2 3 4
# 510 "/usr/include/features.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/gnu/stubs.h" 1 3 4




# 1 "/usr/include/aarch64-linux-gnu/bits/wordsize.h" 1 3 4
# 6 "/usr/include/aarch64-linux-gnu/gnu/stubs.h" 2 3 4


# 1 "/usr/include/aarch64-linux-gnu/gnu/stubs-lp64.h" 1 3 4
# 9 "/usr/include/aarch64-linux-gnu/gnu/stubs.h" 2 3 4
# 511 "/usr/include/features.h" 2 3 4
# 34 "/usr/include/aarch64-linux-gnu/bits/libc-header-start.h" 2 3 4
# 27 "/usr/include/stdint.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/types.h" 1 3 4
# 27 "/usr/include/aarch64-linux-gnu/bits/types.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/wordsize.h" 1 3 4
# 28 "/usr/include/aarch64-linux-gnu/bits/types.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/timesize.h" 1 3 4
# 29 "/usr/include/aarch64-linux-gnu/bits/types.h" 2 3 4



# 31 "/usr/include/aarch64-linux-gnu/bits/types.h" 3 4
typedef unsigned char __u_char;
typedef unsigned short int __u_short;
typedef unsigned int __u_int;
typedef unsigned long int __u_long;


typedef signed char __int8_t;
typedef unsigned char __uint8_t;
typedef signed short int __int16_t;
typedef unsigned short int __uint16_t;
typedef signed int __int32_t;
typedef unsigned int __uint32_t;

typedef signed long int __int64_t;
typedef unsigned long int __uint64_t;






typedef __int8_t __int_least8_t;
typedef __uint8_t __uint_least8_t;
typedef __int16_t __int_least16_t;
typedef __uint16_t __uint_least16_t;
typedef __int32_t __int_least32_t;
typedef __uint32_t __uint_least32_t;
typedef __int64_t __int_least64_t;
typedef __uint64_t __uint_least64_t;



typedef long int __quad_t;
typedef unsigned long int __u_quad_t;







typedef long int __intmax_t;
typedef unsigned long int __uintmax_t;
# 141 "/usr/include/aarch64-linux-gnu/bits/types.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/typesizes.h" 1 3 4
# 142 "/usr/include/aarch64-linux-gnu/bits/types.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/time64.h" 1 3 4
# 143 "/usr/include/aarch64-linux-gnu/bits/types.h" 2 3 4


typedef unsigned long int __dev_t;
typedef unsigned int __uid_t;
typedef unsigned int __gid_t;
typedef unsigned long int __ino_t;
typedef unsigned long int __ino64_t;
typedef unsigned int __mode_t;
typedef unsigned int __nlink_t;
typedef long int __off_t;
typedef long int __off64_t;
typedef int __pid_t;
typedef struct { int __val[2]; } __fsid_t;
typedef long int __clock_t;
typedef unsigned long int __rlim_t;
typedef unsigned long int __rlim64_t;
typedef unsigned int __id_t;
typedef long int __time_t;
typedef unsigned int __useconds_t;
typedef long int __suseconds_t;
typedef long int __suseconds64_t;

typedef int __daddr_t;
typedef int __key_t;


typedef int __clockid_t;


typedef void * __timer_t;


typedef int __blksize_t;




typedef long int __blkcnt_t;
typedef long int __blkcnt64_t;


typedef unsigned long int __fsblkcnt_t;
typedef unsigned long int __fsblkcnt64_t;


typedef unsigned long int __fsfilcnt_t;
typedef unsigned long int __fsfilcnt64_t;


typedef long int __fsword_t;

typedef long int __ssize_t;


typedef long int __syscall_slong_t;

typedef unsigned long int __syscall_ulong_t;



typedef __off64_t __loff_t;
typedef char *__caddr_t;


typedef long int __intptr_t;


typedef unsigned int __socklen_t;




typedef int __sig_atomic_t;
# 28 "/usr/include/stdint.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/wchar.h" 1 3 4
# 29 "/usr/include/stdint.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/wordsize.h" 1 3 4
# 30 "/usr/include/stdint.h" 2 3 4




# 1 "/usr/include/aarch64-linux-gnu/bits/stdint-intn.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/bits/stdint-intn.h" 3 4
typedef __int8_t int8_t;
typedef __int16_t int16_t;
typedef __int32_t int32_t;
typedef __int64_t int64_t;
# 35 "/usr/include/stdint.h" 2 3 4


# 1 "/usr/include/aarch64-linux-gnu/bits/stdint-uintn.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/bits/stdint-uintn.h" 3 4
typedef __uint8_t uint8_t;
typedef __uint16_t uint16_t;
typedef __uint32_t uint32_t;
typedef __uint64_t uint64_t;
# 38 "/usr/include/stdint.h" 2 3 4





typedef __int_least8_t int_least8_t;
typedef __int_least16_t int_least16_t;
typedef __int_least32_t int_least32_t;
typedef __int_least64_t int_least64_t;


typedef __uint_least8_t uint_least8_t;
typedef __uint_least16_t uint_least16_t;
typedef __uint_least32_t uint_least32_t;
typedef __uint_least64_t uint_least64_t;





typedef signed char int_fast8_t;

typedef long int int_fast16_t;
typedef long int int_fast32_t;
typedef long int int_fast64_t;
# 71 "/usr/include/stdint.h" 3 4
typedef unsigned char uint_fast8_t;

typedef unsigned long int uint_fast16_t;
typedef unsigned long int uint_fast32_t;
typedef unsigned long int uint_fast64_t;
# 87 "/usr/include/stdint.h" 3 4
typedef long int intptr_t;


typedef unsigned long int uintptr_t;
# 101 "/usr/include/stdint.h" 3 4
typedef __intmax_t intmax_t;
typedef __uintmax_t uintmax_t;
# 10 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stdint.h" 2 3 4
# 8 "oio.h" 2
# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 143 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 3 4
typedef long int ptrdiff_t;
# 209 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 3 4
typedef long unsigned int size_t;
# 321 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 3 4
typedef unsigned int wchar_t;
# 9 "oio.h" 2



# 11 "oio.h"
typedef int oio_err;

typedef struct oio_req_s oio_req;
typedef struct oio_handle_s oio_handle;


typedef void (*oio_read_cb)(oio_req* req, size_t nread);
typedef void (*oio_write_cb)(oio_req* req);
typedef void (*oio_accept_cb)(oio_handle* handle);
typedef void (*oio_close_cb)(oio_handle* handle, oio_err e);
typedef void (*oio_connect_cb)(oio_req* req, oio_err e);
typedef void (*oio_shutdown_cb)(oio_req* req);
typedef void (*oio_timer_cb)(oio_req* req, int64_t skew);



# 1 "oio-unix.h" 1



# 1 "ngx-queue.h" 1
# 11 "ngx-queue.h"
typedef struct ngx_queue_s ngx_queue_t;

struct ngx_queue_s {
    ngx_queue_t *prev;
    ngx_queue_t *next;
};
# 5 "oio-unix.h" 2

# 1 "ev/ev.h" 1
# 49 "ev/ev.h"

# 143 "ev/ev.h"
typedef double ev_tstamp;


# 1 "/usr/include/signal.h" 1 3 4
# 27 "/usr/include/signal.h" 3 4



# 1 "/usr/include/aarch64-linux-gnu/bits/signum-generic.h" 1 3 4
# 76 "/usr/include/aarch64-linux-gnu/bits/signum-generic.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/signum-arch.h" 1 3 4
# 77 "/usr/include/aarch64-linux-gnu/bits/signum-generic.h" 2 3 4
# 31 "/usr/include/signal.h" 2 3 4

# 1 "/usr/include/aarch64-linux-gnu/bits/types/sig_atomic_t.h" 1 3 4








# 8 "/usr/include/aarch64-linux-gnu/bits/types/sig_atomic_t.h" 3 4
typedef __sig_atomic_t sig_atomic_t;
# 33 "/usr/include/signal.h" 2 3 4
# 72 "/usr/include/signal.h" 3 4
typedef void (*__sighandler_t) (int);




extern __sighandler_t __sysv_signal (int __sig, __sighandler_t __handler)
     __attribute__ ((__nothrow__ , __leaf__));
# 93 "/usr/include/signal.h" 3 4
extern __sighandler_t signal (int __sig, __sighandler_t __handler) __asm__ ("" "__sysv_signal") __attribute__ ((__nothrow__ , __leaf__))

                        ;
# 123 "/usr/include/signal.h" 3 4
extern int raise (int __sig) __attribute__ ((__nothrow__ , __leaf__));
# 383 "/usr/include/signal.h" 3 4
extern int __libc_current_sigrtmin (void) __attribute__ ((__nothrow__ , __leaf__));

extern int __libc_current_sigrtmax (void) __attribute__ ((__nothrow__ , __leaf__));





# 1 "/usr/include/aarch64-linux-gnu/bits/signal_ext.h" 1 3 4
# 392 "/usr/include/signal.h" 2 3 4


# 147 "ev/ev.h" 2
# 155 "ev/ev.h"
# 1 "/usr/include/aarch64-linux-gnu/sys/stat.h" 1 3 4
# 99 "/usr/include/aarch64-linux-gnu/sys/stat.h" 3 4


# 1 "/usr/include/aarch64-linux-gnu/bits/stat.h" 1 3 4
# 25 "/usr/include/aarch64-linux-gnu/bits/stat.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/struct_stat.h" 1 3 4
# 26 "/usr/include/aarch64-linux-gnu/bits/struct_stat.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/endian.h" 1 3 4
# 35 "/usr/include/aarch64-linux-gnu/bits/endian.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/endianness.h" 1 3 4
# 36 "/usr/include/aarch64-linux-gnu/bits/endian.h" 2 3 4
# 27 "/usr/include/aarch64-linux-gnu/bits/struct_stat.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/wordsize.h" 1 3 4
# 28 "/usr/include/aarch64-linux-gnu/bits/struct_stat.h" 2 3 4
# 44 "/usr/include/aarch64-linux-gnu/bits/struct_stat.h" 3 4
struct stat
  {
    __dev_t st_dev;
    __ino_t st_ino;
    __mode_t st_mode;
    __nlink_t st_nlink;
    __uid_t st_uid;
    __gid_t st_gid;
    __dev_t st_rdev;
    __dev_t __pad1;
    __off_t st_size;
    __blksize_t st_blksize;
    int __pad2;
    __blkcnt_t st_blocks;
# 72 "/usr/include/aarch64-linux-gnu/bits/struct_stat.h" 3 4
    __time_t st_atime;
    unsigned long int st_atimensec;
    __time_t st_mtime;
    unsigned long int st_mtimensec;
    __time_t st_ctime;
    unsigned long int st_ctimensec;

    int __glibc_reserved[2];
  };
# 26 "/usr/include/aarch64-linux-gnu/bits/stat.h" 2 3 4
# 102 "/usr/include/aarch64-linux-gnu/sys/stat.h" 2 3 4
# 205 "/usr/include/aarch64-linux-gnu/sys/stat.h" 3 4
extern int stat (const char *__restrict __file,
   struct stat *__restrict __buf) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));



extern int fstat (int __fd, struct stat *__buf) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (2)));
# 352 "/usr/include/aarch64-linux-gnu/sys/stat.h" 3 4
extern int chmod (const char *__file, __mode_t __mode)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 380 "/usr/include/aarch64-linux-gnu/sys/stat.h" 3 4
extern __mode_t umask (__mode_t __mask) __attribute__ ((__nothrow__ , __leaf__));
# 389 "/usr/include/aarch64-linux-gnu/sys/stat.h" 3 4
extern int mkdir (const char *__path, __mode_t __mode)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 418 "/usr/include/aarch64-linux-gnu/sys/stat.h" 3 4
extern int mkfifo (const char *__path, __mode_t __mode)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 468 "/usr/include/aarch64-linux-gnu/sys/stat.h" 3 4

# 156 "ev/ev.h" 2





# 160 "ev/ev.h"
struct ev_loop;
# 199 "ev/ev.h"
enum {
  EV_UNDEF = 0xFFFFFFFF,
  EV_NONE = 0x00,
  EV_READ = 0x01,
  EV_WRITE = 0x02,
  EV__IOFDSET = 0x80,
  EV_IO = EV_READ,
  EV_TIMER = 0x00000100,

  EV_TIMEOUT = EV_TIMER,

  EV_PERIODIC = 0x00000200,
  EV_SIGNAL = 0x00000400,
  EV_CHILD = 0x00000800,
  EV_STAT = 0x00001000,
  EV_IDLE = 0x00002000,
  EV_PREPARE = 0x00004000,
  EV_CHECK = 0x00008000,
  EV_EMBED = 0x00010000,
  EV_FORK = 0x00020000,
  EV_CLEANUP = 0x00040000,
  EV_ASYNC = 0x00080000,
  EV_CUSTOM = 0x01000000,
  EV_ERROR = 0x80000000
};
# 280 "ev/ev.h"
typedef struct ev_watcher
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_watcher *w, int revents);
} ev_watcher;


typedef struct ev_watcher_list
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_watcher_list *w, int revents); struct ev_watcher_list *next;
} ev_watcher_list;


typedef struct ev_watcher_time
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_watcher_time *w, int revents); ev_tstamp at;
} ev_watcher_time;



typedef struct ev_io
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_io *w, int revents); struct ev_watcher_list *next;

  int fd;
  int events;
} ev_io;



typedef struct ev_timer
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_timer *w, int revents); ev_tstamp at;

  ev_tstamp repeat;
} ev_timer;



typedef struct ev_periodic
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_periodic *w, int revents); ev_tstamp at;

  ev_tstamp offset;
  ev_tstamp interval;
  ev_tstamp (*reschedule_cb)(struct ev_periodic *w, ev_tstamp now);
} ev_periodic;



typedef struct ev_signal
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_signal *w, int revents); struct ev_watcher_list *next;

  int signum;
} ev_signal;




typedef struct ev_child
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_child *w, int revents); struct ev_watcher_list *next;

  int flags;
  int pid;
  int rpid;
  int rstatus;
} ev_child;






typedef struct stat ev_statdata;




typedef struct ev_stat
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_stat *w, int revents); struct ev_watcher_list *next;

  ev_timer timer;
  ev_tstamp interval;
  const char *path;
  ev_statdata prev;
  ev_statdata attr;

  int wd;
} ev_stat;





typedef struct ev_idle
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_idle *w, int revents);
} ev_idle;





typedef struct ev_prepare
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_prepare *w, int revents);
} ev_prepare;



typedef struct ev_check
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_check *w, int revents);
} ev_check;




typedef struct ev_fork
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_fork *w, int revents);
} ev_fork;





typedef struct ev_cleanup
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_cleanup *w, int revents);
} ev_cleanup;





typedef struct ev_embed
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_embed *w, int revents);

  struct ev_loop *other;
  ev_io io;
  ev_prepare prepare;
  ev_check check;
  ev_timer timer;
  ev_periodic periodic;
  ev_idle idle;
  ev_fork fork;

  ev_cleanup cleanup;

} ev_embed;





typedef struct ev_async
{
  int active; int pending; int priority; void *data; void (*cb)(struct ev_loop *loop, struct ev_async *w, int revents);

  sig_atomic_t volatile sent;
} ev_async;





union ev_any_watcher
{
  struct ev_watcher w;
  struct ev_watcher_list wl;

  struct ev_io io;
  struct ev_timer timer;
  struct ev_periodic periodic;
  struct ev_signal signal;
  struct ev_child child;

  struct ev_stat stat;


  struct ev_idle idle;

  struct ev_prepare prepare;
  struct ev_check check;

  struct ev_fork fork;


  struct ev_cleanup cleanup;


  struct ev_embed embed;


  struct ev_async async;

};


enum {

  EVFLAG_AUTO = 0x00000000U,

  EVFLAG_NOENV = 0x01000000U,
  EVFLAG_FORKCHECK = 0x02000000U,

  EVFLAG_NOINOTIFY = 0x00100000U,

  EVFLAG_NOSIGFD = 0,

  EVFLAG_SIGNALFD = 0x00200000U,
  EVFLAG_NOSIGMASK = 0x00400000U
};


enum {
  EVBACKEND_SELECT = 0x00000001U,
  EVBACKEND_POLL = 0x00000002U,
  EVBACKEND_EPOLL = 0x00000004U,
  EVBACKEND_KQUEUE = 0x00000008U,
  EVBACKEND_DEVPOLL = 0x00000010U,
  EVBACKEND_PORT = 0x00000020U,
  EVBACKEND_ALL = 0x0000003FU,
  EVBACKEND_MASK = 0x0000FFFFU
};


int ev_version_major (void);
int ev_version_minor (void);

unsigned int ev_supported_backends (void);
unsigned int ev_recommended_backends (void);
unsigned int ev_embeddable_backends (void);

ev_tstamp ev_time (void);
void ev_sleep (ev_tstamp delay);







void ev_set_allocator (void *(*cb)(void *ptr, long size));





void ev_set_syserr_cb (void (*cb)(const char *msg));





struct ev_loop *ev_default_loop (unsigned int flags );

static struct ev_loop *
ev_default_loop_uc_ (void)
{
  extern struct ev_loop *ev_default_loop_ptr;

  return ev_default_loop_ptr;
}

static int
ev_is_default_loop (struct ev_loop *loop)
{
  return loop == ev_default_loop_uc_ ();
}


struct ev_loop *ev_loop_new (unsigned int flags );

ev_tstamp ev_now (struct ev_loop *loop);
# 582 "ev/ev.h"
void ev_loop_destroy (struct ev_loop *loop);





void ev_loop_fork (struct ev_loop *loop);

unsigned int ev_backend (struct ev_loop *loop);

void ev_now_update (struct ev_loop *loop);
# 604 "ev/ev.h"
enum {
  EVRUN_NOWAIT = 1,
  EVRUN_ONCE = 2
};


enum {
  EVBREAK_CANCEL = 0,
  EVBREAK_ONE = 1,
  EVBREAK_ALL = 2
};


void ev_run (struct ev_loop *loop, int flags );
void ev_break (struct ev_loop *loop, int how );






void ev_ref (struct ev_loop *loop);
void ev_unref (struct ev_loop *loop);





void ev_once (struct ev_loop *loop, int fd, int events, ev_tstamp timeout, void (*cb)(int revents, void *arg), void *arg);


unsigned int ev_iteration (struct ev_loop *loop);
unsigned int ev_depth (struct ev_loop *loop);
void ev_verify (struct ev_loop *loop);

void ev_set_io_collect_interval (struct ev_loop *loop, ev_tstamp interval);
void ev_set_timeout_collect_interval (struct ev_loop *loop, ev_tstamp interval);


void ev_set_userdata (struct ev_loop *loop, void *data);
void *ev_userdata (struct ev_loop *loop);
void ev_set_invoke_pending_cb (struct ev_loop *loop, void (*invoke_pending_cb)(struct ev_loop *loop));
void ev_set_loop_release_cb (struct ev_loop *loop, void (*release)(struct ev_loop *loop), void (*acquire)(struct ev_loop *loop));

unsigned int ev_pending_count (struct ev_loop *loop);
void ev_invoke_pending (struct ev_loop *loop);




void ev_suspend (struct ev_loop *loop);
void ev_resume (struct ev_loop *loop);
# 722 "ev/ev.h"
void ev_feed_event (struct ev_loop *loop, void *w, int revents);
void ev_feed_fd_event (struct ev_loop *loop, int fd, int revents);

void ev_feed_signal (int signum);
void ev_feed_signal_event (struct ev_loop *loop, int signum);

void ev_invoke (struct ev_loop *loop, void *w, int revents);
int ev_clear_pending (struct ev_loop *loop, void *w);

void ev_io_start (struct ev_loop *loop, ev_io *w);
void ev_io_stop (struct ev_loop *loop, ev_io *w);

void ev_timer_start (struct ev_loop *loop, ev_timer *w);
void ev_timer_stop (struct ev_loop *loop, ev_timer *w);

void ev_timer_again (struct ev_loop *loop, ev_timer *w);

ev_tstamp ev_timer_remaining (struct ev_loop *loop, ev_timer *w);


void ev_periodic_start (struct ev_loop *loop, ev_periodic *w);
void ev_periodic_stop (struct ev_loop *loop, ev_periodic *w);
void ev_periodic_again (struct ev_loop *loop, ev_periodic *w);




void ev_signal_start (struct ev_loop *loop, ev_signal *w);
void ev_signal_stop (struct ev_loop *loop, ev_signal *w);




void ev_child_start (struct ev_loop *loop, ev_child *w);
void ev_child_stop (struct ev_loop *loop, ev_child *w);



void ev_stat_start (struct ev_loop *loop, ev_stat *w);
void ev_stat_stop (struct ev_loop *loop, ev_stat *w);
void ev_stat_stat (struct ev_loop *loop, ev_stat *w);



void ev_idle_start (struct ev_loop *loop, ev_idle *w);
void ev_idle_stop (struct ev_loop *loop, ev_idle *w);



void ev_prepare_start (struct ev_loop *loop, ev_prepare *w);
void ev_prepare_stop (struct ev_loop *loop, ev_prepare *w);



void ev_check_start (struct ev_loop *loop, ev_check *w);
void ev_check_stop (struct ev_loop *loop, ev_check *w);



void ev_fork_start (struct ev_loop *loop, ev_fork *w);
void ev_fork_stop (struct ev_loop *loop, ev_fork *w);



void ev_cleanup_start (struct ev_loop *loop, ev_cleanup *w);
void ev_cleanup_stop (struct ev_loop *loop, ev_cleanup *w);




void ev_embed_start (struct ev_loop *loop, ev_embed *w);
void ev_embed_stop (struct ev_loop *loop, ev_embed *w);
void ev_embed_sweep (struct ev_loop *loop, ev_embed *w);



void ev_async_start (struct ev_loop *loop, ev_async *w);
void ev_async_stop (struct ev_loop *loop, ev_async *w);
void ev_async_send (struct ev_loop *loop, ev_async *w);
# 810 "ev/ev.h"
    static void ev_loop (struct ev_loop *loop, int flags) { ev_run (loop, flags); }
    static void ev_unloop (struct ev_loop *loop, int how ) { ev_break (loop, how ); }
    static void ev_default_destroy (void) { ev_loop_destroy (ev_default_loop (0)); }
    static void ev_default_fork (void) { ev_loop_fork (ev_default_loop (0)); }

      static unsigned int ev_loop_count (struct ev_loop *loop) { return ev_iteration (loop); }
      static unsigned int ev_loop_depth (struct ev_loop *loop) { return ev_depth (loop); }
      static void ev_loop_verify (struct ev_loop *loop) { ev_verify (loop); }
# 826 "ev/ev.h"

# 7 "oio-unix.h" 2

# 1 "/usr/include/aarch64-linux-gnu/sys/types.h" 1 3 4
# 27 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4

# 47 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4

# 47 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4
typedef __ino_t ino_t;
# 59 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4
typedef __dev_t dev_t;




typedef __gid_t gid_t;




typedef __mode_t mode_t;




typedef __nlink_t nlink_t;




typedef __uid_t uid_t;





typedef __off_t off_t;
# 97 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4
typedef __pid_t pid_t;
# 108 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4
typedef __ssize_t ssize_t;
# 128 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/types/clockid_t.h" 1 3 4






typedef __clockid_t clockid_t;
# 129 "/usr/include/aarch64-linux-gnu/sys/types.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/types/time_t.h" 1 3 4
# 10 "/usr/include/aarch64-linux-gnu/bits/types/time_t.h" 3 4
typedef __time_t time_t;
# 130 "/usr/include/aarch64-linux-gnu/sys/types.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/types/timer_t.h" 1 3 4






typedef __timer_t timer_t;
# 131 "/usr/include/aarch64-linux-gnu/sys/types.h" 2 3 4
# 144 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4
# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 145 "/usr/include/aarch64-linux-gnu/sys/types.h" 2 3 4
# 158 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4
typedef __uint8_t u_int8_t;
typedef __uint16_t u_int16_t;
typedef __uint32_t u_int32_t;
typedef __uint64_t u_int64_t;


typedef int register_t __attribute__ ((__mode__ (__word__)));
# 192 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4
typedef __blkcnt_t blkcnt_t;



typedef __fsblkcnt_t fsblkcnt_t;



typedef __fsfilcnt_t fsfilcnt_t;
# 230 "/usr/include/aarch64-linux-gnu/sys/types.h" 3 4

# 9 "oio-unix.h" 2
# 1 "/usr/include/aarch64-linux-gnu/sys/socket.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4


# 1 "/usr/include/aarch64-linux-gnu/bits/types/struct_iovec.h" 1 3 4
# 23 "/usr/include/aarch64-linux-gnu/bits/types/struct_iovec.h" 3 4
# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/bits/types/struct_iovec.h" 2 3 4


struct iovec
  {
    void *iov_base;
    size_t iov_len;
  };
# 27 "/usr/include/aarch64-linux-gnu/sys/socket.h" 2 3 4

# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 29 "/usr/include/aarch64-linux-gnu/sys/socket.h" 2 3 4




# 1 "/usr/include/aarch64-linux-gnu/bits/socket.h" 1 3 4
# 27 "/usr/include/aarch64-linux-gnu/bits/socket.h" 3 4
# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 28 "/usr/include/aarch64-linux-gnu/bits/socket.h" 2 3 4





typedef __socklen_t socklen_t;




# 1 "/usr/include/aarch64-linux-gnu/bits/socket_type.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/bits/socket_type.h" 3 4
enum __socket_type
{
  SOCK_STREAM = 1,


  SOCK_DGRAM = 2,


  SOCK_RAW = 3,

  SOCK_RDM = 4,

  SOCK_SEQPACKET = 5,


  SOCK_DCCP = 6,

  SOCK_PACKET = 10,







  SOCK_CLOEXEC = 02000000,


  SOCK_NONBLOCK = 00004000


};
# 39 "/usr/include/aarch64-linux-gnu/bits/socket.h" 2 3 4
# 177 "/usr/include/aarch64-linux-gnu/bits/socket.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/sockaddr.h" 1 3 4
# 28 "/usr/include/aarch64-linux-gnu/bits/sockaddr.h" 3 4
typedef unsigned short int sa_family_t;
# 178 "/usr/include/aarch64-linux-gnu/bits/socket.h" 2 3 4


struct sockaddr
  {
    sa_family_t sa_family;
    char sa_data[14];
  };
# 193 "/usr/include/aarch64-linux-gnu/bits/socket.h" 3 4
struct sockaddr_storage
  {
    sa_family_t ss_family;
    char __ss_padding[(128 - (sizeof (unsigned short int)) - sizeof (unsigned long int))];
    unsigned long int __ss_align;
  };



enum
  {
    MSG_OOB = 0x01,

    MSG_PEEK = 0x02,

    MSG_DONTROUTE = 0x04,






    MSG_CTRUNC = 0x08,

    MSG_PROXY = 0x10,

    MSG_TRUNC = 0x20,

    MSG_DONTWAIT = 0x40,

    MSG_EOR = 0x80,

    MSG_WAITALL = 0x100,

    MSG_FIN = 0x200,

    MSG_SYN = 0x400,

    MSG_CONFIRM = 0x800,

    MSG_RST = 0x1000,

    MSG_ERRQUEUE = 0x2000,

    MSG_NOSIGNAL = 0x4000,

    MSG_MORE = 0x8000,

    MSG_WAITFORONE = 0x10000,

    MSG_BATCH = 0x40000,

    MSG_ZEROCOPY = 0x4000000,

    MSG_FASTOPEN = 0x20000000,


    MSG_CMSG_CLOEXEC = 0x40000000



  };




struct msghdr
  {
    void *msg_name;
    socklen_t msg_namelen;

    struct iovec *msg_iov;
    size_t msg_iovlen;

    void *msg_control;
    size_t msg_controllen;




    int msg_flags;
  };


struct cmsghdr
  {
    size_t cmsg_len;




    int cmsg_level;
    int cmsg_type;

    __extension__ unsigned char __cmsg_data [];

  };
# 307 "/usr/include/aarch64-linux-gnu/bits/socket.h" 3 4
extern struct cmsghdr *__cmsg_nxthdr (struct msghdr *__mhdr,
          struct cmsghdr *__cmsg) __attribute__ ((__nothrow__ , __leaf__));
# 334 "/usr/include/aarch64-linux-gnu/bits/socket.h" 3 4
enum
  {
    SCM_RIGHTS = 0x01





  };
# 359 "/usr/include/aarch64-linux-gnu/bits/socket.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/socket-constants.h" 1 3 4
# 23 "/usr/include/aarch64-linux-gnu/bits/socket-constants.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/timesize.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/bits/socket-constants.h" 2 3 4
# 360 "/usr/include/aarch64-linux-gnu/bits/socket.h" 2 3 4



struct linger
  {
    int l_onoff;
    int l_linger;
  };
# 34 "/usr/include/aarch64-linux-gnu/sys/socket.h" 2 3 4







enum
{
  SHUT_RD = 0,

  SHUT_WR,

  SHUT_RDWR

};
# 102 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern int socket (int __domain, int __type, int __protocol) __attribute__ ((__nothrow__ , __leaf__));





extern int socketpair (int __domain, int __type, int __protocol,
         int __fds[2]) __attribute__ ((__nothrow__ , __leaf__));


extern int bind (int __fd, const struct sockaddr * __addr, socklen_t __len)
     __attribute__ ((__nothrow__ , __leaf__));


extern int getsockname (int __fd, struct sockaddr *__restrict __addr,
   socklen_t *__restrict __len) __attribute__ ((__nothrow__ , __leaf__));
# 126 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern int connect (int __fd, const struct sockaddr * __addr, socklen_t __len);



extern int getpeername (int __fd, struct sockaddr *__restrict __addr,
   socklen_t *__restrict __len) __attribute__ ((__nothrow__ , __leaf__));






extern ssize_t send (int __fd, const void *__buf, size_t __n, int __flags);






extern ssize_t recv (int __fd, void *__buf, size_t __n, int __flags);






extern ssize_t sendto (int __fd, const void *__buf, size_t __n,
         int __flags, const struct sockaddr * __addr,
         socklen_t __addr_len);
# 163 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern ssize_t recvfrom (int __fd, void *__restrict __buf, size_t __n,
    int __flags, struct sockaddr *__restrict __addr,
    socklen_t *__restrict __addr_len);
# 174 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern ssize_t sendmsg (int __fd, const struct msghdr *__message,
   int __flags);
# 216 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern ssize_t recvmsg (int __fd, struct msghdr *__message, int __flags);
# 255 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern int getsockopt (int __fd, int __level, int __optname,
         void *__restrict __optval,
         socklen_t *__restrict __optlen) __attribute__ ((__nothrow__ , __leaf__));
# 277 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern int setsockopt (int __fd, int __level, int __optname,
         const void *__optval, socklen_t __optlen) __attribute__ ((__nothrow__ , __leaf__));
# 296 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern int listen (int __fd, int __n) __attribute__ ((__nothrow__ , __leaf__));
# 306 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern int accept (int __fd, struct sockaddr *__restrict __addr,
     socklen_t *__restrict __addr_len);
# 324 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4
extern int shutdown (int __fd, int __how) __attribute__ ((__nothrow__ , __leaf__));
# 346 "/usr/include/aarch64-linux-gnu/sys/socket.h" 3 4

# 10 "oio-unix.h" 2
# 1 "/usr/include/netinet/in.h" 1 3 4
# 27 "/usr/include/netinet/in.h" 3 4



typedef uint32_t in_addr_t;
struct in_addr
  {
    in_addr_t s_addr;
  };


# 1 "/usr/include/aarch64-linux-gnu/bits/in.h" 1 3 4
# 38 "/usr/include/netinet/in.h" 2 3 4


enum
  {
    IPPROTO_IP = 0,

    IPPROTO_ICMP = 1,

    IPPROTO_IGMP = 2,

    IPPROTO_IPIP = 4,

    IPPROTO_TCP = 6,

    IPPROTO_EGP = 8,

    IPPROTO_PUP = 12,

    IPPROTO_UDP = 17,

    IPPROTO_IDP = 22,

    IPPROTO_TP = 29,

    IPPROTO_DCCP = 33,

    IPPROTO_IPV6 = 41,

    IPPROTO_RSVP = 46,

    IPPROTO_GRE = 47,

    IPPROTO_ESP = 50,

    IPPROTO_AH = 51,

    IPPROTO_MTP = 92,

    IPPROTO_BEETPH = 94,

    IPPROTO_ENCAP = 98,

    IPPROTO_PIM = 103,

    IPPROTO_COMP = 108,

    IPPROTO_SCTP = 132,

    IPPROTO_UDPLITE = 136,

    IPPROTO_MPLS = 137,

    IPPROTO_ETHERNET = 143,

    IPPROTO_RAW = 255,

    IPPROTO_MPTCP = 262,

    IPPROTO_MAX
  };





enum
  {
    IPPROTO_HOPOPTS = 0,

    IPPROTO_ROUTING = 43,

    IPPROTO_FRAGMENT = 44,

    IPPROTO_ICMPV6 = 58,

    IPPROTO_NONE = 59,

    IPPROTO_DSTOPTS = 60,

    IPPROTO_MH = 135

  };



typedef uint16_t in_port_t;


enum
  {
    IPPORT_ECHO = 7,
    IPPORT_DISCARD = 9,
    IPPORT_SYSTAT = 11,
    IPPORT_DAYTIME = 13,
    IPPORT_NETSTAT = 15,
    IPPORT_FTP = 21,
    IPPORT_TELNET = 23,
    IPPORT_SMTP = 25,
    IPPORT_TIMESERVER = 37,
    IPPORT_NAMESERVER = 42,
    IPPORT_WHOIS = 43,
    IPPORT_MTP = 57,

    IPPORT_TFTP = 69,
    IPPORT_RJE = 77,
    IPPORT_FINGER = 79,
    IPPORT_TTYLINK = 87,
    IPPORT_SUPDUP = 95,


    IPPORT_EXECSERVER = 512,
    IPPORT_LOGINSERVER = 513,
    IPPORT_CMDSERVER = 514,
    IPPORT_EFSSERVER = 520,


    IPPORT_BIFFUDP = 512,
    IPPORT_WHOSERVER = 513,
    IPPORT_ROUTESERVER = 520,


    IPPORT_RESERVED = 1024,


    IPPORT_USERRESERVED = 5000
  };
# 219 "/usr/include/netinet/in.h" 3 4
struct in6_addr
  {
    union
      {
 uint8_t __u6_addr8[16];
 uint16_t __u6_addr16[8];
 uint32_t __u6_addr32[4];
      } __in6_u;





  };


extern const struct in6_addr in6addr_any;
extern const struct in6_addr in6addr_loopback;
# 245 "/usr/include/netinet/in.h" 3 4
struct sockaddr_in
  {
    sa_family_t sin_family;
    in_port_t sin_port;
    struct in_addr sin_addr;


    unsigned char sin_zero[sizeof (struct sockaddr)
      - (sizeof (unsigned short int))
      - sizeof (in_port_t)
      - sizeof (struct in_addr)];
  };



struct sockaddr_in6
  {
    sa_family_t sin6_family;
    in_port_t sin6_port;
    uint32_t sin6_flowinfo;
    struct in6_addr sin6_addr;
    uint32_t sin6_scope_id;
  };
# 296 "/usr/include/netinet/in.h" 3 4
struct ipv6_mreq
  {

    struct in6_addr ipv6mr_multiaddr;


    unsigned int ipv6mr_interface;
  };
# 382 "/usr/include/netinet/in.h" 3 4
extern uint32_t ntohl (uint32_t __netlong) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__));
extern uint16_t ntohs (uint16_t __netshort)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__));
extern uint32_t htonl (uint32_t __hostlong)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__));
extern uint16_t htons (uint16_t __hostshort)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__));

# 1 "/usr/include/endian.h" 1 3 4
# 391 "/usr/include/netinet/in.h" 2 3 4


# 1 "/usr/include/aarch64-linux-gnu/bits/byteswap.h" 1 3 4
# 33 "/usr/include/aarch64-linux-gnu/bits/byteswap.h" 3 4
static __inline __uint16_t
__bswap_16 (__uint16_t __bsx)
{

  return __builtin_bswap16 (__bsx);



}






static __inline __uint32_t
__bswap_32 (__uint32_t __bsx)
{

  return __builtin_bswap32 (__bsx);



}
# 69 "/usr/include/aarch64-linux-gnu/bits/byteswap.h" 3 4
__extension__ static __inline __uint64_t
__bswap_64 (__uint64_t __bsx)
{

  return __builtin_bswap64 (__bsx);



}
# 394 "/usr/include/netinet/in.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/uintn-identity.h" 1 3 4
# 32 "/usr/include/aarch64-linux-gnu/bits/uintn-identity.h" 3 4
static __inline __uint16_t
__uint16_identity (__uint16_t __x)
{
  return __x;
}

static __inline __uint32_t
__uint32_identity (__uint32_t __x)
{
  return __x;
}

static __inline __uint64_t
__uint64_identity (__uint64_t __x)
{
  return __x;
}
# 395 "/usr/include/netinet/in.h" 2 3 4
# 638 "/usr/include/netinet/in.h" 3 4

# 11 "oio-unix.h" 2
# 1 "/usr/include/netinet/tcp.h" 1 3 4
# 12 "oio-unix.h" 2




# 15 "oio-unix.h"
typedef struct {
  char* base;
  size_t len;
} oio_buf;
# 28 "oio.h" 2





typedef enum {
  OIO_UNKNOWN_HANDLE = 0,
  OIO_TCP,
  OIO_NAMED_PIPE,
  OIO_TTY,
  OIO_FILE,
} oio_handle_type;

typedef enum {
  OIO_UNKNOWN_REQ = 0,
  OIO_CONNECT,
  OIO_ACCEPT,
  OIO_READ,
  OIO_WRITE,
  OIO_SHUTDOWN,
  OIO_CLOSE,
  OIO_TIMEOUT
} oio_req_type;


struct oio_handle_s {

  oio_handle_type type;

  oio_close_cb close_cb;
  void* data;

  int fd; int flags; oio_err err; oio_read_cb read_cb; oio_accept_cb accept_cb; int accepted_fd; oio_req *connect_req; ev_io read_watcher; ev_io write_watcher; ev_idle next_watcher; ngx_queue_t write_queue; ngx_queue_t read_reqs;
};


struct oio_req_s {

  oio_req_type type;

  oio_handle* handle;
  void* cb;
  void* data;

  oio_connect_cb connect_cb; ngx_queue_t read_reqs; oio_buf* read_bufs; ev_timer timer; int read_bufcnt;
};







oio_err oio_last_error();
const char* oio_err_str(oio_err err);


void oio_init();
int oio_run();

void oio_update_time();
int64_t oio_now();

void oio_req_init(oio_req* req, oio_handle* handle, void* cb);
# 103 "oio.h"
int oio_tcp_handle_init(oio_handle *handle, oio_close_cb close_cb, void* data);
int oio_bind(oio_handle* handle, struct sockaddr* addr);
int oio_connect(oio_req* req, struct sockaddr* addr);
int oio_shutdown(oio_req* req);


int oio_listen(oio_handle* handle, int backlog, oio_accept_cb cb);


int oio_tcp_handle_accept(oio_handle* server, oio_handle* client,
    oio_close_cb close_cb, void* data);


int oio_read(oio_req* req, oio_buf* bufs, int bufcnt);
int oio_write(oio_req* req, oio_buf* bufs, int bufcnt);
int oio_write2(oio_req *req, const char* msg);


int oio_timeout(oio_req *req, int64_t timeout);



int oio_close(oio_handle* handle);



struct sockaddr_in oio_ip4_addr(char* ip, int port);
# 2 "oio-unix.c" 2

# 1 "/usr/include/stdio.h" 1 3 4
# 27 "/usr/include/stdio.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/libc-header-start.h" 1 3 4
# 28 "/usr/include/stdio.h" 2 3 4





# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 34 "/usr/include/stdio.h" 2 3 4


# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stdarg.h" 1 3 4
# 40 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stdarg.h" 3 4

# 40 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stdarg.h" 3 4
typedef __builtin_va_list __gnuc_va_list;
# 37 "/usr/include/stdio.h" 2 3 4


# 1 "/usr/include/aarch64-linux-gnu/bits/types/__fpos_t.h" 1 3 4




# 1 "/usr/include/aarch64-linux-gnu/bits/types/__mbstate_t.h" 1 3 4
# 13 "/usr/include/aarch64-linux-gnu/bits/types/__mbstate_t.h" 3 4
typedef struct
{
  int __count;
  union
  {
    unsigned int __wch;
    char __wchb[4];
  } __value;
} __mbstate_t;
# 6 "/usr/include/aarch64-linux-gnu/bits/types/__fpos_t.h" 2 3 4




typedef struct _G_fpos_t
{
  __off_t __pos;
  __mbstate_t __state;
} __fpos_t;
# 40 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/types/__fpos64_t.h" 1 3 4
# 10 "/usr/include/aarch64-linux-gnu/bits/types/__fpos64_t.h" 3 4
typedef struct _G_fpos64_t
{
  __off64_t __pos;
  __mbstate_t __state;
} __fpos64_t;
# 41 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/types/__FILE.h" 1 3 4



struct _IO_FILE;
typedef struct _IO_FILE __FILE;
# 42 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/types/FILE.h" 1 3 4



struct _IO_FILE;


typedef struct _IO_FILE FILE;
# 43 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/types/struct_FILE.h" 1 3 4
# 35 "/usr/include/aarch64-linux-gnu/bits/types/struct_FILE.h" 3 4
struct _IO_FILE;
struct _IO_marker;
struct _IO_codecvt;
struct _IO_wide_data;




typedef void _IO_lock_t;





struct _IO_FILE
{
  int _flags;


  char *_IO_read_ptr;
  char *_IO_read_end;
  char *_IO_read_base;
  char *_IO_write_base;
  char *_IO_write_ptr;
  char *_IO_write_end;
  char *_IO_buf_base;
  char *_IO_buf_end;


  char *_IO_save_base;
  char *_IO_backup_base;
  char *_IO_save_end;

  struct _IO_marker *_markers;

  struct _IO_FILE *_chain;

  int _fileno;
  int _flags2;
  __off_t _old_offset;


  unsigned short _cur_column;
  signed char _vtable_offset;
  char _shortbuf[1];

  _IO_lock_t *_lock;







  __off64_t _offset;

  struct _IO_codecvt *_codecvt;
  struct _IO_wide_data *_wide_data;
  struct _IO_FILE *_freeres_list;
  void *_freeres_buf;
  size_t __pad5;
  int _mode;

  char _unused2[15 * sizeof (int) - 4 * sizeof (void *) - sizeof (size_t)];
};
# 44 "/usr/include/stdio.h" 2 3 4
# 84 "/usr/include/stdio.h" 3 4
typedef __fpos_t fpos_t;
# 133 "/usr/include/stdio.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/stdio_lim.h" 1 3 4
# 134 "/usr/include/stdio.h" 2 3 4
# 143 "/usr/include/stdio.h" 3 4
extern FILE *stdin;
extern FILE *stdout;
extern FILE *stderr;






extern int remove (const char *__filename) __attribute__ ((__nothrow__ , __leaf__));

extern int rename (const char *__old, const char *__new) __attribute__ ((__nothrow__ , __leaf__));
# 178 "/usr/include/stdio.h" 3 4
extern int fclose (FILE *__stream);
# 188 "/usr/include/stdio.h" 3 4
extern FILE *tmpfile (void)
  __attribute__ ((__malloc__)) __attribute__ ((__malloc__ (fclose, 1))) ;
# 205 "/usr/include/stdio.h" 3 4
extern char *tmpnam (char[20]) __attribute__ ((__nothrow__ , __leaf__)) ;
# 230 "/usr/include/stdio.h" 3 4
extern int fflush (FILE *__stream);
# 258 "/usr/include/stdio.h" 3 4
extern FILE *fopen (const char *__restrict __filename,
      const char *__restrict __modes)
  __attribute__ ((__malloc__)) __attribute__ ((__malloc__ (fclose, 1))) ;




extern FILE *freopen (const char *__restrict __filename,
        const char *__restrict __modes,
        FILE *__restrict __stream) ;
# 328 "/usr/include/stdio.h" 3 4
extern void setbuf (FILE *__restrict __stream, char *__restrict __buf) __attribute__ ((__nothrow__ , __leaf__));



extern int setvbuf (FILE *__restrict __stream, char *__restrict __buf,
      int __modes, size_t __n) __attribute__ ((__nothrow__ , __leaf__));
# 350 "/usr/include/stdio.h" 3 4
extern int fprintf (FILE *__restrict __stream,
      const char *__restrict __format, ...);




extern int printf (const char *__restrict __format, ...);

extern int sprintf (char *__restrict __s,
      const char *__restrict __format, ...) __attribute__ ((__nothrow__));





extern int vfprintf (FILE *__restrict __s, const char *__restrict __format,
       __gnuc_va_list __arg);




extern int vprintf (const char *__restrict __format, __gnuc_va_list __arg);

extern int vsprintf (char *__restrict __s, const char *__restrict __format,
       __gnuc_va_list __arg) __attribute__ ((__nothrow__));
# 415 "/usr/include/stdio.h" 3 4
extern int fscanf (FILE *__restrict __stream,
     const char *__restrict __format, ...) ;




extern int scanf (const char *__restrict __format, ...) ;

extern int sscanf (const char *__restrict __s,
     const char *__restrict __format, ...) __attribute__ ((__nothrow__ , __leaf__));





# 1 "/usr/include/aarch64-linux-gnu/bits/floatn.h" 1 3 4
# 23 "/usr/include/aarch64-linux-gnu/bits/floatn.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/long-double.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/bits/floatn.h" 2 3 4
# 95 "/usr/include/aarch64-linux-gnu/bits/floatn.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/floatn-common.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/bits/floatn-common.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/long-double.h" 1 3 4
# 25 "/usr/include/aarch64-linux-gnu/bits/floatn-common.h" 2 3 4
# 96 "/usr/include/aarch64-linux-gnu/bits/floatn.h" 2 3 4
# 431 "/usr/include/stdio.h" 2 3 4



extern int fscanf (FILE *__restrict __stream, const char *__restrict __format, ...) __asm__ ("" "__isoc99_fscanf")

                               ;
extern int scanf (const char *__restrict __format, ...) __asm__ ("" "__isoc99_scanf")
                              ;
extern int sscanf (const char *__restrict __s, const char *__restrict __format, ...) __asm__ ("" "__isoc99_sscanf") __attribute__ ((__nothrow__ , __leaf__))

                      ;
# 513 "/usr/include/stdio.h" 3 4
extern int fgetc (FILE *__stream);
extern int getc (FILE *__stream);





extern int getchar (void);
# 549 "/usr/include/stdio.h" 3 4
extern int fputc (int __c, FILE *__stream);
extern int putc (int __c, FILE *__stream);





extern int putchar (int __c);
# 592 "/usr/include/stdio.h" 3 4
extern char *fgets (char *__restrict __s, int __n, FILE *__restrict __stream)
     __attribute__ ((__access__ (__write_only__, 1, 2)));
# 605 "/usr/include/stdio.h" 3 4
extern char *gets (char *__s) __attribute__ ((__deprecated__));
# 655 "/usr/include/stdio.h" 3 4
extern int fputs (const char *__restrict __s, FILE *__restrict __stream);





extern int puts (const char *__s);






extern int ungetc (int __c, FILE *__stream);






extern size_t fread (void *__restrict __ptr, size_t __size,
       size_t __n, FILE *__restrict __stream) ;




extern size_t fwrite (const void *__restrict __ptr, size_t __size,
        size_t __n, FILE *__restrict __s);
# 713 "/usr/include/stdio.h" 3 4
extern int fseek (FILE *__stream, long int __off, int __whence);




extern long int ftell (FILE *__stream) ;




extern void rewind (FILE *__stream);
# 760 "/usr/include/stdio.h" 3 4
extern int fgetpos (FILE *__restrict __stream, fpos_t *__restrict __pos);




extern int fsetpos (FILE *__stream, const fpos_t *__pos);
# 786 "/usr/include/stdio.h" 3 4
extern void clearerr (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__));

extern int feof (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__)) ;

extern int ferror (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__)) ;
# 804 "/usr/include/stdio.h" 3 4
extern void perror (const char *__s);
# 885 "/usr/include/stdio.h" 3 4
extern int __uflow (FILE *);
extern int __overflow (FILE *, int);
# 902 "/usr/include/stdio.h" 3 4

# 4 "oio-unix.c" 2

# 1 "/usr/include/stdlib.h" 1 3 4
# 26 "/usr/include/stdlib.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/libc-header-start.h" 1 3 4
# 27 "/usr/include/stdlib.h" 2 3 4





# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 33 "/usr/include/stdlib.h" 2 3 4


# 59 "/usr/include/stdlib.h" 3 4
typedef struct
  {
    int quot;
    int rem;
  } div_t;



typedef struct
  {
    long int quot;
    long int rem;
  } ldiv_t;
# 98 "/usr/include/stdlib.h" 3 4
extern size_t __ctype_get_mb_cur_max (void) __attribute__ ((__nothrow__ , __leaf__)) ;



extern double atof (const char *__nptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1))) ;

extern int atoi (const char *__nptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1))) ;

extern long int atol (const char *__nptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1))) ;
# 118 "/usr/include/stdlib.h" 3 4
extern double strtod (const char *__restrict __nptr,
        char **__restrict __endptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 177 "/usr/include/stdlib.h" 3 4
extern long int strtol (const char *__restrict __nptr,
   char **__restrict __endptr, int __base)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));

extern unsigned long int strtoul (const char *__restrict __nptr,
      char **__restrict __endptr, int __base)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 454 "/usr/include/stdlib.h" 3 4
extern int rand (void) __attribute__ ((__nothrow__ , __leaf__));

extern void srand (unsigned int __seed) __attribute__ ((__nothrow__ , __leaf__));
# 540 "/usr/include/stdlib.h" 3 4
extern void *malloc (size_t __size) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__malloc__))
     __attribute__ ((__alloc_size__ (1))) ;

extern void *calloc (size_t __nmemb, size_t __size)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__malloc__)) __attribute__ ((__alloc_size__ (1, 2))) ;






extern void *realloc (void *__ptr, size_t __size)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__warn_unused_result__)) __attribute__ ((__alloc_size__ (2)));


extern void free (void *__ptr) __attribute__ ((__nothrow__ , __leaf__));
# 598 "/usr/include/stdlib.h" 3 4
extern void abort (void) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));



extern int atexit (void (*__func) (void)) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 624 "/usr/include/stdlib.h" 3 4
extern void exit (int __status) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));
# 641 "/usr/include/stdlib.h" 3 4
extern char *getenv (const char *__name) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1))) ;
# 791 "/usr/include/stdlib.h" 3 4
extern int system (const char *__command) ;
# 816 "/usr/include/stdlib.h" 3 4
typedef int (*__compar_fn_t) (const void *, const void *);
# 828 "/usr/include/stdlib.h" 3 4
extern void *bsearch (const void *__key, const void *__base,
        size_t __nmemb, size_t __size, __compar_fn_t __compar)
     __attribute__ ((__nonnull__ (1, 2, 5))) ;







extern void qsort (void *__base, size_t __nmemb, size_t __size,
     __compar_fn_t __compar) __attribute__ ((__nonnull__ (1, 4)));
# 848 "/usr/include/stdlib.h" 3 4
extern int abs (int __x) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__)) ;
extern long int labs (long int __x) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__)) ;
# 860 "/usr/include/stdlib.h" 3 4
extern div_t div (int __numer, int __denom)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__)) ;
extern ldiv_t ldiv (long int __numer, long int __denom)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__)) ;
# 930 "/usr/include/stdlib.h" 3 4
extern int mblen (const char *__s, size_t __n) __attribute__ ((__nothrow__ , __leaf__));


extern int mbtowc (wchar_t *__restrict __pwc,
     const char *__restrict __s, size_t __n) __attribute__ ((__nothrow__ , __leaf__));


extern int wctomb (char *__s, wchar_t __wchar) __attribute__ ((__nothrow__ , __leaf__));



extern size_t mbstowcs (wchar_t *__restrict __pwcs,
   const char *__restrict __s, size_t __n) __attribute__ ((__nothrow__ , __leaf__))
    __attribute__ ((__access__ (__read_only__, 2)));

extern size_t wcstombs (char *__restrict __s,
   const wchar_t *__restrict __pwcs, size_t __n)
     __attribute__ ((__nothrow__ , __leaf__))
  __attribute__ ((__access__ (__write_only__, 1, 3)))
  __attribute__ ((__access__ (__read_only__, 2)));
# 1023 "/usr/include/stdlib.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/stdlib-float.h" 1 3 4
# 1024 "/usr/include/stdlib.h" 2 3 4
# 1035 "/usr/include/stdlib.h" 3 4

# 6 "oio-unix.c" 2
# 1 "/usr/include/errno.h" 1 3 4
# 28 "/usr/include/errno.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/errno.h" 1 3 4
# 26 "/usr/include/aarch64-linux-gnu/bits/errno.h" 3 4
# 1 "/usr/include/linux/errno.h" 1 3 4
# 1 "/usr/include/aarch64-linux-gnu/asm/errno.h" 1 3 4
# 1 "/usr/include/asm-generic/errno.h" 1 3 4




# 1 "/usr/include/asm-generic/errno-base.h" 1 3 4
# 6 "/usr/include/asm-generic/errno.h" 2 3 4
# 2 "/usr/include/aarch64-linux-gnu/asm/errno.h" 2 3 4
# 2 "/usr/include/linux/errno.h" 2 3 4
# 27 "/usr/include/aarch64-linux-gnu/bits/errno.h" 2 3 4
# 29 "/usr/include/errno.h" 2 3 4








extern int *__errno_location (void) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__));
# 52 "/usr/include/errno.h" 3 4

# 7 "oio-unix.c" 2
# 1 "/usr/include/assert.h" 1 3 4
# 66 "/usr/include/assert.h" 3 4



extern void __assert_fail (const char *__assertion, const char *__file,
      unsigned int __line, const char *__function)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));


extern void __assert_perror_fail (int __errnum, const char *__file,
      unsigned int __line, const char *__function)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));




extern void __assert (const char *__assertion, const char *__file, int __line)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));



# 8 "oio-unix.c" 2
# 1 "/usr/include/string.h" 1 3 4
# 26 "/usr/include/string.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/libc-header-start.h" 1 3 4
# 27 "/usr/include/string.h" 2 3 4






# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 34 "/usr/include/string.h" 2 3 4
# 43 "/usr/include/string.h" 3 4
extern void *memcpy (void *__restrict __dest, const void *__restrict __src,
       size_t __n) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));


extern void *memmove (void *__dest, const void *__src, size_t __n)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));
# 61 "/usr/include/string.h" 3 4
extern void *memset (void *__s, int __c, size_t __n) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));


extern int memcmp (const void *__s1, const void *__s2, size_t __n)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));
# 80 "/usr/include/string.h" 3 4
extern int __memcmpeq (const void *__s1, const void *__s2, size_t __n)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));
# 107 "/usr/include/string.h" 3 4
extern void *memchr (const void *__s, int __c, size_t __n)
      __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1)));
# 141 "/usr/include/string.h" 3 4
extern char *strcpy (char *__restrict __dest, const char *__restrict __src)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));

extern char *strncpy (char *__restrict __dest,
        const char *__restrict __src, size_t __n)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));


extern char *strcat (char *__restrict __dest, const char *__restrict __src)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));

extern char *strncat (char *__restrict __dest, const char *__restrict __src,
        size_t __n) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));


extern int strcmp (const char *__s1, const char *__s2)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));

extern int strncmp (const char *__s1, const char *__s2, size_t __n)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));


extern int strcoll (const char *__s1, const char *__s2)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));

extern size_t strxfrm (char *__restrict __dest,
         const char *__restrict __src, size_t __n)
    __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (2))) __attribute__ ((__access__ (__write_only__, 1, 3)));
# 246 "/usr/include/string.h" 3 4
extern char *strchr (const char *__s, int __c)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1)));
# 273 "/usr/include/string.h" 3 4
extern char *strrchr (const char *__s, int __c)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1)));
# 293 "/usr/include/string.h" 3 4
extern size_t strcspn (const char *__s, const char *__reject)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));


extern size_t strspn (const char *__s, const char *__accept)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));
# 323 "/usr/include/string.h" 3 4
extern char *strpbrk (const char *__s, const char *__accept)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));
# 350 "/usr/include/string.h" 3 4
extern char *strstr (const char *__haystack, const char *__needle)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1, 2)));




extern char *strtok (char *__restrict __s, const char *__restrict __delim)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (2)));



extern char *__strtok_r (char *__restrict __s,
    const char *__restrict __delim,
    char **__restrict __save_ptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (2, 3)));
# 407 "/usr/include/string.h" 3 4
extern size_t strlen (const char *__s)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1)));
# 419 "/usr/include/string.h" 3 4
extern char *strerror (int __errnum) __attribute__ ((__nothrow__ , __leaf__));
# 539 "/usr/include/string.h" 3 4

# 9 "oio-unix.c" 2
# 1 "/usr/include/unistd.h" 1 3 4
# 27 "/usr/include/unistd.h" 3 4

# 202 "/usr/include/unistd.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/posix_opt.h" 1 3 4
# 203 "/usr/include/unistd.h" 2 3 4
# 226 "/usr/include/unistd.h" 3 4
# 1 "/usr/lib/gcc/aarch64-linux-gnu/11/include/stddef.h" 1 3 4
# 227 "/usr/include/unistd.h" 2 3 4
# 287 "/usr/include/unistd.h" 3 4
extern int access (const char *__name, int __type) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 339 "/usr/include/unistd.h" 3 4
extern __off_t lseek (int __fd, __off_t __offset, int __whence) __attribute__ ((__nothrow__ , __leaf__));
# 358 "/usr/include/unistd.h" 3 4
extern int close (int __fd);
# 371 "/usr/include/unistd.h" 3 4
extern ssize_t read (int __fd, void *__buf, size_t __nbytes)
    __attribute__ ((__access__ (__write_only__, 2, 3)));





extern ssize_t write (int __fd, const void *__buf, size_t __n)
    __attribute__ ((__access__ (__read_only__, 2, 3)));
# 437 "/usr/include/unistd.h" 3 4
extern int pipe (int __pipedes[2]) __attribute__ ((__nothrow__ , __leaf__)) ;
# 452 "/usr/include/unistd.h" 3 4
extern unsigned int alarm (unsigned int __seconds) __attribute__ ((__nothrow__ , __leaf__));
# 464 "/usr/include/unistd.h" 3 4
extern unsigned int sleep (unsigned int __seconds);
# 489 "/usr/include/unistd.h" 3 4
extern int pause (void);



extern int chown (const char *__file, __uid_t __owner, __gid_t __group)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1))) ;
# 517 "/usr/include/unistd.h" 3 4
extern int chdir (const char *__path) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1))) ;
# 531 "/usr/include/unistd.h" 3 4
extern char *getcwd (char *__buf, size_t __size) __attribute__ ((__nothrow__ , __leaf__)) ;
# 552 "/usr/include/unistd.h" 3 4
extern int dup (int __fd) __attribute__ ((__nothrow__ , __leaf__)) ;


extern int dup2 (int __fd, int __fd2) __attribute__ ((__nothrow__ , __leaf__));
# 564 "/usr/include/unistd.h" 3 4
extern char **__environ;







extern int execve (const char *__path, char *const __argv[],
     char *const __envp[]) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));
# 584 "/usr/include/unistd.h" 3 4
extern int execv (const char *__path, char *const __argv[])
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));



extern int execle (const char *__path, const char *__arg, ...)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));



extern int execl (const char *__path, const char *__arg, ...)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));



extern int execvp (const char *__file, char *const __argv[])
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));




extern int execlp (const char *__file, const char *__arg, ...)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2)));
# 624 "/usr/include/unistd.h" 3 4
extern void _exit (int __status) __attribute__ ((__noreturn__));





# 1 "/usr/include/aarch64-linux-gnu/bits/confname.h" 1 3 4
# 24 "/usr/include/aarch64-linux-gnu/bits/confname.h" 3 4
enum
  {
    _PC_LINK_MAX,

    _PC_MAX_CANON,

    _PC_MAX_INPUT,

    _PC_NAME_MAX,

    _PC_PATH_MAX,

    _PC_PIPE_BUF,

    _PC_CHOWN_RESTRICTED,

    _PC_NO_TRUNC,

    _PC_VDISABLE,

    _PC_SYNC_IO,

    _PC_ASYNC_IO,

    _PC_PRIO_IO,

    _PC_SOCK_MAXBUF,

    _PC_FILESIZEBITS,

    _PC_REC_INCR_XFER_SIZE,

    _PC_REC_MAX_XFER_SIZE,

    _PC_REC_MIN_XFER_SIZE,

    _PC_REC_XFER_ALIGN,

    _PC_ALLOC_SIZE_MIN,

    _PC_SYMLINK_MAX,

    _PC_2_SYMLINKS

  };


enum
  {
    _SC_ARG_MAX,

    _SC_CHILD_MAX,

    _SC_CLK_TCK,

    _SC_NGROUPS_MAX,

    _SC_OPEN_MAX,

    _SC_STREAM_MAX,

    _SC_TZNAME_MAX,

    _SC_JOB_CONTROL,

    _SC_SAVED_IDS,

    _SC_REALTIME_SIGNALS,

    _SC_PRIORITY_SCHEDULING,

    _SC_TIMERS,

    _SC_ASYNCHRONOUS_IO,

    _SC_PRIORITIZED_IO,

    _SC_SYNCHRONIZED_IO,

    _SC_FSYNC,

    _SC_MAPPED_FILES,

    _SC_MEMLOCK,

    _SC_MEMLOCK_RANGE,

    _SC_MEMORY_PROTECTION,

    _SC_MESSAGE_PASSING,

    _SC_SEMAPHORES,

    _SC_SHARED_MEMORY_OBJECTS,

    _SC_AIO_LISTIO_MAX,

    _SC_AIO_MAX,

    _SC_AIO_PRIO_DELTA_MAX,

    _SC_DELAYTIMER_MAX,

    _SC_MQ_OPEN_MAX,

    _SC_MQ_PRIO_MAX,

    _SC_VERSION,

    _SC_PAGESIZE,


    _SC_RTSIG_MAX,

    _SC_SEM_NSEMS_MAX,

    _SC_SEM_VALUE_MAX,

    _SC_SIGQUEUE_MAX,

    _SC_TIMER_MAX,




    _SC_BC_BASE_MAX,

    _SC_BC_DIM_MAX,

    _SC_BC_SCALE_MAX,

    _SC_BC_STRING_MAX,

    _SC_COLL_WEIGHTS_MAX,

    _SC_EQUIV_CLASS_MAX,

    _SC_EXPR_NEST_MAX,

    _SC_LINE_MAX,

    _SC_RE_DUP_MAX,

    _SC_CHARCLASS_NAME_MAX,


    _SC_2_VERSION,

    _SC_2_C_BIND,

    _SC_2_C_DEV,

    _SC_2_FORT_DEV,

    _SC_2_FORT_RUN,

    _SC_2_SW_DEV,

    _SC_2_LOCALEDEF,


    _SC_PII,

    _SC_PII_XTI,

    _SC_PII_SOCKET,

    _SC_PII_INTERNET,

    _SC_PII_OSI,

    _SC_POLL,

    _SC_SELECT,

    _SC_UIO_MAXIOV,

    _SC_IOV_MAX = _SC_UIO_MAXIOV,

    _SC_PII_INTERNET_STREAM,

    _SC_PII_INTERNET_DGRAM,

    _SC_PII_OSI_COTS,

    _SC_PII_OSI_CLTS,

    _SC_PII_OSI_M,

    _SC_T_IOV_MAX,



    _SC_THREADS,

    _SC_THREAD_SAFE_FUNCTIONS,

    _SC_GETGR_R_SIZE_MAX,

    _SC_GETPW_R_SIZE_MAX,

    _SC_LOGIN_NAME_MAX,

    _SC_TTY_NAME_MAX,

    _SC_THREAD_DESTRUCTOR_ITERATIONS,

    _SC_THREAD_KEYS_MAX,

    _SC_THREAD_STACK_MIN,

    _SC_THREAD_THREADS_MAX,

    _SC_THREAD_ATTR_STACKADDR,

    _SC_THREAD_ATTR_STACKSIZE,

    _SC_THREAD_PRIORITY_SCHEDULING,

    _SC_THREAD_PRIO_INHERIT,

    _SC_THREAD_PRIO_PROTECT,

    _SC_THREAD_PROCESS_SHARED,


    _SC_NPROCESSORS_CONF,

    _SC_NPROCESSORS_ONLN,

    _SC_PHYS_PAGES,

    _SC_AVPHYS_PAGES,

    _SC_ATEXIT_MAX,

    _SC_PASS_MAX,


    _SC_XOPEN_VERSION,

    _SC_XOPEN_XCU_VERSION,

    _SC_XOPEN_UNIX,

    _SC_XOPEN_CRYPT,

    _SC_XOPEN_ENH_I18N,

    _SC_XOPEN_SHM,


    _SC_2_CHAR_TERM,

    _SC_2_C_VERSION,

    _SC_2_UPE,


    _SC_XOPEN_XPG2,

    _SC_XOPEN_XPG3,

    _SC_XOPEN_XPG4,


    _SC_CHAR_BIT,

    _SC_CHAR_MAX,

    _SC_CHAR_MIN,

    _SC_INT_MAX,

    _SC_INT_MIN,

    _SC_LONG_BIT,

    _SC_WORD_BIT,

    _SC_MB_LEN_MAX,

    _SC_NZERO,

    _SC_SSIZE_MAX,

    _SC_SCHAR_MAX,

    _SC_SCHAR_MIN,

    _SC_SHRT_MAX,

    _SC_SHRT_MIN,

    _SC_UCHAR_MAX,

    _SC_UINT_MAX,

    _SC_ULONG_MAX,

    _SC_USHRT_MAX,


    _SC_NL_ARGMAX,

    _SC_NL_LANGMAX,

    _SC_NL_MSGMAX,

    _SC_NL_NMAX,

    _SC_NL_SETMAX,

    _SC_NL_TEXTMAX,


    _SC_XBS5_ILP32_OFF32,

    _SC_XBS5_ILP32_OFFBIG,

    _SC_XBS5_LP64_OFF64,

    _SC_XBS5_LPBIG_OFFBIG,


    _SC_XOPEN_LEGACY,

    _SC_XOPEN_REALTIME,

    _SC_XOPEN_REALTIME_THREADS,


    _SC_ADVISORY_INFO,

    _SC_BARRIERS,

    _SC_BASE,

    _SC_C_LANG_SUPPORT,

    _SC_C_LANG_SUPPORT_R,

    _SC_CLOCK_SELECTION,

    _SC_CPUTIME,

    _SC_THREAD_CPUTIME,

    _SC_DEVICE_IO,

    _SC_DEVICE_SPECIFIC,

    _SC_DEVICE_SPECIFIC_R,

    _SC_FD_MGMT,

    _SC_FIFO,

    _SC_PIPE,

    _SC_FILE_ATTRIBUTES,

    _SC_FILE_LOCKING,

    _SC_FILE_SYSTEM,

    _SC_MONOTONIC_CLOCK,

    _SC_MULTI_PROCESS,

    _SC_SINGLE_PROCESS,

    _SC_NETWORKING,

    _SC_READER_WRITER_LOCKS,

    _SC_SPIN_LOCKS,

    _SC_REGEXP,

    _SC_REGEX_VERSION,

    _SC_SHELL,

    _SC_SIGNALS,

    _SC_SPAWN,

    _SC_SPORADIC_SERVER,

    _SC_THREAD_SPORADIC_SERVER,

    _SC_SYSTEM_DATABASE,

    _SC_SYSTEM_DATABASE_R,

    _SC_TIMEOUTS,

    _SC_TYPED_MEMORY_OBJECTS,

    _SC_USER_GROUPS,

    _SC_USER_GROUPS_R,

    _SC_2_PBS,

    _SC_2_PBS_ACCOUNTING,

    _SC_2_PBS_LOCATE,

    _SC_2_PBS_MESSAGE,

    _SC_2_PBS_TRACK,

    _SC_SYMLOOP_MAX,

    _SC_STREAMS,

    _SC_2_PBS_CHECKPOINT,


    _SC_V6_ILP32_OFF32,

    _SC_V6_ILP32_OFFBIG,

    _SC_V6_LP64_OFF64,

    _SC_V6_LPBIG_OFFBIG,


    _SC_HOST_NAME_MAX,

    _SC_TRACE,

    _SC_TRACE_EVENT_FILTER,

    _SC_TRACE_INHERIT,

    _SC_TRACE_LOG,


    _SC_LEVEL1_ICACHE_SIZE,

    _SC_LEVEL1_ICACHE_ASSOC,

    _SC_LEVEL1_ICACHE_LINESIZE,

    _SC_LEVEL1_DCACHE_SIZE,

    _SC_LEVEL1_DCACHE_ASSOC,

    _SC_LEVEL1_DCACHE_LINESIZE,

    _SC_LEVEL2_CACHE_SIZE,

    _SC_LEVEL2_CACHE_ASSOC,

    _SC_LEVEL2_CACHE_LINESIZE,

    _SC_LEVEL3_CACHE_SIZE,

    _SC_LEVEL3_CACHE_ASSOC,

    _SC_LEVEL3_CACHE_LINESIZE,

    _SC_LEVEL4_CACHE_SIZE,

    _SC_LEVEL4_CACHE_ASSOC,

    _SC_LEVEL4_CACHE_LINESIZE,



    _SC_IPV6 = _SC_LEVEL1_ICACHE_SIZE + 50,

    _SC_RAW_SOCKETS,


    _SC_V7_ILP32_OFF32,

    _SC_V7_ILP32_OFFBIG,

    _SC_V7_LP64_OFF64,

    _SC_V7_LPBIG_OFFBIG,


    _SC_SS_REPL_MAX,


    _SC_TRACE_EVENT_NAME_MAX,

    _SC_TRACE_NAME_MAX,

    _SC_TRACE_SYS_MAX,

    _SC_TRACE_USER_EVENT_MAX,


    _SC_XOPEN_STREAMS,


    _SC_THREAD_ROBUST_PRIO_INHERIT,

    _SC_THREAD_ROBUST_PRIO_PROTECT,


    _SC_MINSIGSTKSZ,


    _SC_SIGSTKSZ

  };


enum
  {
    _CS_PATH,


    _CS_V6_WIDTH_RESTRICTED_ENVS,



    _CS_GNU_LIBC_VERSION,

    _CS_GNU_LIBPTHREAD_VERSION,


    _CS_V5_WIDTH_RESTRICTED_ENVS,



    _CS_V7_WIDTH_RESTRICTED_ENVS,



    _CS_LFS_CFLAGS = 1000,

    _CS_LFS_LDFLAGS,

    _CS_LFS_LIBS,

    _CS_LFS_LINTFLAGS,

    _CS_LFS64_CFLAGS,

    _CS_LFS64_LDFLAGS,

    _CS_LFS64_LIBS,

    _CS_LFS64_LINTFLAGS,


    _CS_XBS5_ILP32_OFF32_CFLAGS = 1100,

    _CS_XBS5_ILP32_OFF32_LDFLAGS,

    _CS_XBS5_ILP32_OFF32_LIBS,

    _CS_XBS5_ILP32_OFF32_LINTFLAGS,

    _CS_XBS5_ILP32_OFFBIG_CFLAGS,

    _CS_XBS5_ILP32_OFFBIG_LDFLAGS,

    _CS_XBS5_ILP32_OFFBIG_LIBS,

    _CS_XBS5_ILP32_OFFBIG_LINTFLAGS,

    _CS_XBS5_LP64_OFF64_CFLAGS,

    _CS_XBS5_LP64_OFF64_LDFLAGS,

    _CS_XBS5_LP64_OFF64_LIBS,

    _CS_XBS5_LP64_OFF64_LINTFLAGS,

    _CS_XBS5_LPBIG_OFFBIG_CFLAGS,

    _CS_XBS5_LPBIG_OFFBIG_LDFLAGS,

    _CS_XBS5_LPBIG_OFFBIG_LIBS,

    _CS_XBS5_LPBIG_OFFBIG_LINTFLAGS,


    _CS_POSIX_V6_ILP32_OFF32_CFLAGS,

    _CS_POSIX_V6_ILP32_OFF32_LDFLAGS,

    _CS_POSIX_V6_ILP32_OFF32_LIBS,

    _CS_POSIX_V6_ILP32_OFF32_LINTFLAGS,

    _CS_POSIX_V6_ILP32_OFFBIG_CFLAGS,

    _CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS,

    _CS_POSIX_V6_ILP32_OFFBIG_LIBS,

    _CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS,

    _CS_POSIX_V6_LP64_OFF64_CFLAGS,

    _CS_POSIX_V6_LP64_OFF64_LDFLAGS,

    _CS_POSIX_V6_LP64_OFF64_LIBS,

    _CS_POSIX_V6_LP64_OFF64_LINTFLAGS,

    _CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS,

    _CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS,

    _CS_POSIX_V6_LPBIG_OFFBIG_LIBS,

    _CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS,


    _CS_POSIX_V7_ILP32_OFF32_CFLAGS,

    _CS_POSIX_V7_ILP32_OFF32_LDFLAGS,

    _CS_POSIX_V7_ILP32_OFF32_LIBS,

    _CS_POSIX_V7_ILP32_OFF32_LINTFLAGS,

    _CS_POSIX_V7_ILP32_OFFBIG_CFLAGS,

    _CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS,

    _CS_POSIX_V7_ILP32_OFFBIG_LIBS,

    _CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS,

    _CS_POSIX_V7_LP64_OFF64_CFLAGS,

    _CS_POSIX_V7_LP64_OFF64_LDFLAGS,

    _CS_POSIX_V7_LP64_OFF64_LIBS,

    _CS_POSIX_V7_LP64_OFF64_LINTFLAGS,

    _CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS,

    _CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS,

    _CS_POSIX_V7_LPBIG_OFFBIG_LIBS,

    _CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS,


    _CS_V6_ENV,

    _CS_V7_ENV

  };
# 631 "/usr/include/unistd.h" 2 3 4


extern long int pathconf (const char *__path, int __name)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));


extern long int fpathconf (int __fd, int __name) __attribute__ ((__nothrow__ , __leaf__));


extern long int sysconf (int __name) __attribute__ ((__nothrow__ , __leaf__));
# 650 "/usr/include/unistd.h" 3 4
extern __pid_t getpid (void) __attribute__ ((__nothrow__ , __leaf__));


extern __pid_t getppid (void) __attribute__ ((__nothrow__ , __leaf__));


extern __pid_t getpgrp (void) __attribute__ ((__nothrow__ , __leaf__));


extern __pid_t __getpgid (__pid_t __pid) __attribute__ ((__nothrow__ , __leaf__));
# 668 "/usr/include/unistd.h" 3 4
extern int setpgid (__pid_t __pid, __pid_t __pgid) __attribute__ ((__nothrow__ , __leaf__));
# 689 "/usr/include/unistd.h" 3 4
extern __pid_t setsid (void) __attribute__ ((__nothrow__ , __leaf__));







extern __uid_t getuid (void) __attribute__ ((__nothrow__ , __leaf__));


extern __uid_t geteuid (void) __attribute__ ((__nothrow__ , __leaf__));


extern __gid_t getgid (void) __attribute__ ((__nothrow__ , __leaf__));


extern __gid_t getegid (void) __attribute__ ((__nothrow__ , __leaf__));




extern int getgroups (int __size, __gid_t __list[]) __attribute__ ((__nothrow__ , __leaf__))
    __attribute__ ((__access__ (__write_only__, 2, 1)));
# 722 "/usr/include/unistd.h" 3 4
extern int setuid (__uid_t __uid) __attribute__ ((__nothrow__ , __leaf__)) ;
# 739 "/usr/include/unistd.h" 3 4
extern int setgid (__gid_t __gid) __attribute__ ((__nothrow__ , __leaf__)) ;
# 778 "/usr/include/unistd.h" 3 4
extern __pid_t fork (void) __attribute__ ((__nothrow__));
# 799 "/usr/include/unistd.h" 3 4
extern char *ttyname (int __fd) __attribute__ ((__nothrow__ , __leaf__));



extern int ttyname_r (int __fd, char *__buf, size_t __buflen)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (2)))
     __attribute__ ((__access__ (__write_only__, 2, 3)));



extern int isatty (int __fd) __attribute__ ((__nothrow__ , __leaf__));
# 819 "/usr/include/unistd.h" 3 4
extern int link (const char *__from, const char *__to)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 2))) ;
# 858 "/usr/include/unistd.h" 3 4
extern int unlink (const char *__name) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 867 "/usr/include/unistd.h" 3 4
extern int rmdir (const char *__path) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));



extern __pid_t tcgetpgrp (int __fd) __attribute__ ((__nothrow__ , __leaf__));


extern int tcsetpgrp (int __fd, __pid_t __pgrp_id) __attribute__ ((__nothrow__ , __leaf__));






extern char *getlogin (void);
# 989 "/usr/include/unistd.h" 3 4
extern int fsync (int __fd);
# 1218 "/usr/include/unistd.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/unistd_ext.h" 1 3 4
# 1219 "/usr/include/unistd.h" 2 3 4


# 10 "oio-unix.c" 2
# 1 "/usr/include/fcntl.h" 1 3 4
# 28 "/usr/include/fcntl.h" 3 4







# 1 "/usr/include/aarch64-linux-gnu/bits/fcntl.h" 1 3 4
# 40 "/usr/include/aarch64-linux-gnu/bits/fcntl.h" 3 4
struct flock
  {
    short int l_type;
    short int l_whence;
    __off_t l_start;
    __off_t l_len;
    __pid_t l_pid;
  };
# 61 "/usr/include/aarch64-linux-gnu/bits/fcntl.h" 3 4
# 1 "/usr/include/aarch64-linux-gnu/bits/fcntl-linux.h" 1 3 4
# 393 "/usr/include/aarch64-linux-gnu/bits/fcntl-linux.h" 3 4

# 467 "/usr/include/aarch64-linux-gnu/bits/fcntl-linux.h" 3 4

# 62 "/usr/include/aarch64-linux-gnu/bits/fcntl.h" 2 3 4
# 36 "/usr/include/fcntl.h" 2 3 4
# 149 "/usr/include/fcntl.h" 3 4
extern int fcntl (int __fd, int __cmd, ...);
# 181 "/usr/include/fcntl.h" 3 4
extern int open (const char *__file, int __oflag, ...) __attribute__ ((__nonnull__ (1)));
# 227 "/usr/include/fcntl.h" 3 4
extern int creat (const char *__file, mode_t __mode) __attribute__ ((__nonnull__ (1)));
# 317 "/usr/include/fcntl.h" 3 4

# 11 "oio-unix.c" 2



# 1 "/usr/include/arpa/inet.h" 1 3 4
# 30 "/usr/include/arpa/inet.h" 3 4




extern in_addr_t inet_addr (const char *__cp) __attribute__ ((__nothrow__ , __leaf__));


extern in_addr_t inet_lnaof (struct in_addr __in) __attribute__ ((__nothrow__ , __leaf__));



extern struct in_addr inet_makeaddr (in_addr_t __net, in_addr_t __host)
     __attribute__ ((__nothrow__ , __leaf__));


extern in_addr_t inet_netof (struct in_addr __in) __attribute__ ((__nothrow__ , __leaf__));



extern in_addr_t inet_network (const char *__cp) __attribute__ ((__nothrow__ , __leaf__));



extern char *inet_ntoa (struct in_addr __in) __attribute__ ((__nothrow__ , __leaf__));




extern int inet_pton (int __af, const char *__restrict __cp,
        void *__restrict __buf) __attribute__ ((__nothrow__ , __leaf__));




extern const char *inet_ntop (int __af, const void *__restrict __cp,
         char *__restrict __buf, socklen_t __len)
     __attribute__ ((__nothrow__ , __leaf__));
# 104 "/usr/include/arpa/inet.h" 3 4

# 15 "oio-unix.c" 2




# 18 "oio-unix.c"
size_t strnlen (register const char* s, size_t maxlen) {
  register const char *e;
  size_t n;

  for (e = s, n = 0; *e && n < maxlen; e++, n++);
  return n;
}



void oio_tcp_io(struct ev_loop *loop, ev_io* watcher, int revents);
void oio__next(struct ev_loop *loop, ev_idle* watcher, int revents);
void oio_tcp_connect(oio_handle* handle);
int oio_tcp_open(oio_handle*, int fd);
void oio_finish_close(oio_handle* handle);



enum {
  OIO_CLOSING = 0x00000001,
  OIO_CLOSED = 0x00000002
};


void oio_flag_set(oio_handle* handle, int flag) {
  handle->flags |= flag;
}


void oio_flag_unset(oio_handle* handle, int flag) {
  handle->flags = handle->flags & ~flag;
}


int oio_flag_is_set(oio_handle* handle, int flag) {
  return (handle->flags & flag) != 0;
}


static oio_err oio_err_new(oio_handle* handle, int e) {
  handle->err = e;
  return e;
}


oio_err oio_err_last(oio_handle *handle) {
  return handle->err;
}


struct sockaddr_in oio_ip4_addr(char *ip, int port) {
  struct sockaddr_in addr;

  addr.sin_family = 
# 71 "oio-unix.c" 3 4
                   2
# 71 "oio-unix.c"
                          ;
  addr.sin_port = htons(port);
  addr.sin_addr.s_addr = inet_addr(ip);

  return addr;
}


int oio_close(oio_handle* handle) {
  oio_flag_set(handle, OIO_CLOSING);

  ev_io_stop(ev_default_loop (0), &handle->write_watcher);
  ev_io_stop(ev_default_loop (0), &handle->read_watcher);

  ev_idle_start(ev_default_loop (0), &handle->next_watcher);
  ev_feed_event(ev_default_loop (0), &handle->next_watcher, EV_IDLE);
  
# 87 "oio-unix.c" 3 4
 ((
# 87 "oio-unix.c"
 (0 + ((ev_watcher *)(void *)(&handle->next_watcher))->pending)
# 87 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 87 "oio-unix.c"
 "ev_is_pending(&handle->next_watcher)"
# 87 "oio-unix.c" 3 4
 , "oio-unix.c", 87, __extension__ __PRETTY_FUNCTION__))
# 87 "oio-unix.c"
                                             ;

  return 0;
}


void oio_init() {
  ev_default_loop(0);
}


int oio_run() {
  ev_run(ev_default_loop (0), 0);
}


int oio_tcp_handle_init(oio_handle *handle, oio_close_cb close_cb,
    void* data) {
  handle->type = OIO_TCP;
  handle->close_cb = close_cb;
  handle->data = data;
  handle->flags = 0;
  handle->connect_req = 
# 109 "oio-unix.c" 3 4
                       ((void *)0)
# 109 "oio-unix.c"
                           ;
  handle->accepted_fd = -1;
  handle->fd = -1;

  (&handle->read_reqs)->prev = &handle->read_reqs; (&handle->read_reqs)->next = &handle->read_reqs;

  do { ((ev_watcher *)(void *)(&handle->next_watcher))->active = ((ev_watcher *)(void *)(&handle->next_watcher))->pending = 0; ( (ev_watcher *)(void *)((&handle->next_watcher)))->priority = (0); ((&handle->next_watcher))->cb = (oio__next); } while (0);
  handle->next_watcher.data = handle;

  do { ((ev_watcher *)(void *)(&handle->read_watcher))->active = ((ev_watcher *)(void *)(&handle->read_watcher))->pending = 0; ( (ev_watcher *)(void *)((&handle->read_watcher)))->priority = (0); ((&handle->read_watcher))->cb = (oio_tcp_io); } while (0);
  handle->read_watcher.data = handle;

  do { ((ev_watcher *)(void *)(&handle->write_watcher))->active = ((ev_watcher *)(void *)(&handle->write_watcher))->pending = 0; ( (ev_watcher *)(void *)((&handle->write_watcher)))->priority = (0); ((&handle->write_watcher))->cb = (oio_tcp_io); } while (0);
  handle->write_watcher.data = handle;

  return 0;
}


int oio_bind(oio_handle* handle, struct sockaddr* addr) {
  int addrsize;
  int domain;
  int r;

  if (handle->fd <= 0) {
    int fd = socket(
# 134 "oio-unix.c" 3 4
                   2
# 134 "oio-unix.c"
                          , 
# 134 "oio-unix.c" 3 4
                            SOCK_STREAM
# 134 "oio-unix.c"
                                       , 0);
    if (fd < 0) {
      oio_err_new(handle, 
# 136 "oio-unix.c" 3 4
                         (*__errno_location ())
# 136 "oio-unix.c"
                              );
      return -1;
    }

    if (oio_tcp_open(handle, fd)) {
      close(fd);
      return -2;
    }
  }

  
# 146 "oio-unix.c" 3 4
 ((
# 146 "oio-unix.c"
 handle->fd >= 0
# 146 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 146 "oio-unix.c"
 "handle->fd >= 0"
# 146 "oio-unix.c" 3 4
 , "oio-unix.c", 146, __extension__ __PRETTY_FUNCTION__))
# 146 "oio-unix.c"
                        ;

  if (addr->sa_family == 
# 148 "oio-unix.c" 3 4
                        2
# 148 "oio-unix.c"
                               ) {
    addrsize = sizeof(struct sockaddr_in);
    domain = 
# 150 "oio-unix.c" 3 4
            2
# 150 "oio-unix.c"
                   ;
  } else if (addr->sa_family == 
# 151 "oio-unix.c" 3 4
                               10
# 151 "oio-unix.c"
                                       ) {
    addrsize = sizeof(struct sockaddr_in6);
    domain = 
# 153 "oio-unix.c" 3 4
            10
# 153 "oio-unix.c"
                    ;
  } else {
    
# 155 "oio-unix.c" 3 4
   ((
# 155 "oio-unix.c"
   0
# 155 "oio-unix.c" 3 4
   ) ? (void) (0) : __assert_fail (
# 155 "oio-unix.c"
   "0"
# 155 "oio-unix.c" 3 4
   , "oio-unix.c", 155, __extension__ __PRETTY_FUNCTION__))
# 155 "oio-unix.c"
            ;
    return -1;
  }

  r = bind(handle->fd, addr, addrsize);

  return oio_err_new(handle, r);
}


int oio_tcp_open(oio_handle* handle, int fd) {
  
# 166 "oio-unix.c" 3 4
 ((
# 166 "oio-unix.c"
 fd >= 0
# 166 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 166 "oio-unix.c"
 "fd >= 0"
# 166 "oio-unix.c" 3 4
 , "oio-unix.c", 166, __extension__ __PRETTY_FUNCTION__))
# 166 "oio-unix.c"
                ;
  handle->fd = fd;


  int yes = 1;
  int r = fcntl(fd, 
# 171 "oio-unix.c" 3 4
                   4
# 171 "oio-unix.c"
                          , 
# 171 "oio-unix.c" 3 4
                            04000
# 171 "oio-unix.c"
                                      );
  
# 172 "oio-unix.c" 3 4
 ((
# 172 "oio-unix.c"
 r == 0
# 172 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 172 "oio-unix.c"
 "r == 0"
# 172 "oio-unix.c" 3 4
 , "oio-unix.c", 172, __extension__ __PRETTY_FUNCTION__))
# 172 "oio-unix.c"
               ;


  r = setsockopt(fd, 
# 175 "oio-unix.c" 3 4
                    1
# 175 "oio-unix.c"
                              , 
# 175 "oio-unix.c" 3 4
                                2
# 175 "oio-unix.c"
                                            , &yes, sizeof(int));
  
# 176 "oio-unix.c" 3 4
 ((
# 176 "oio-unix.c"
 r == 0
# 176 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 176 "oio-unix.c"
 "r == 0"
# 176 "oio-unix.c" 3 4
 , "oio-unix.c", 176, __extension__ __PRETTY_FUNCTION__))
# 176 "oio-unix.c"
               ;


  (&handle->read_reqs)->prev = &handle->read_reqs; (&handle->read_reqs)->next = &handle->read_reqs;


  do { (&handle->read_watcher)->fd = (fd); (&handle->read_watcher)->events = (EV_READ) | EV__IOFDSET; } while (0);
  do { (&handle->write_watcher)->fd = (fd); (&handle->write_watcher)->events = (EV_WRITE) | EV__IOFDSET; } while (0);


  
# 186 "oio-unix.c" 3 4
 ((
# 186 "oio-unix.c"
 handle->next_watcher.data == handle
# 186 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 186 "oio-unix.c"
 "handle->next_watcher.data == handle"
# 186 "oio-unix.c" 3 4
 , "oio-unix.c", 186, __extension__ __PRETTY_FUNCTION__))
# 186 "oio-unix.c"
                                            ;
  
# 187 "oio-unix.c" 3 4
 ((
# 187 "oio-unix.c"
 handle->write_watcher.data == handle
# 187 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 187 "oio-unix.c"
 "handle->write_watcher.data == handle"
# 187 "oio-unix.c" 3 4
 , "oio-unix.c", 187, __extension__ __PRETTY_FUNCTION__))
# 187 "oio-unix.c"
                                             ;
  
# 188 "oio-unix.c" 3 4
 ((
# 188 "oio-unix.c"
 handle->read_watcher.data == handle
# 188 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 188 "oio-unix.c"
 "handle->read_watcher.data == handle"
# 188 "oio-unix.c" 3 4
 , "oio-unix.c", 188, __extension__ __PRETTY_FUNCTION__))
# 188 "oio-unix.c"
                                            ;

  return 0;
}


void oio__server_io(struct ev_loop *loop, ev_io* watcher, int revents) {
  oio_handle* handle = watcher->data;
  
# 196 "oio-unix.c" 3 4
 ((
# 196 "oio-unix.c"
 watcher == &handle->read_watcher || watcher == &handle->write_watcher
# 196 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 196 "oio-unix.c"
 "watcher == &handle->read_watcher || watcher == &handle->write_watcher"
# 196 "oio-unix.c" 3 4
 , "oio-unix.c", 196, __extension__ __PRETTY_FUNCTION__))
                                           
# 197 "oio-unix.c"
                                          ;
  
# 198 "oio-unix.c" 3 4
 ((
# 198 "oio-unix.c"
 revents == EV_READ
# 198 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 198 "oio-unix.c"
 "revents == EV_READ"
# 198 "oio-unix.c" 3 4
 , "oio-unix.c", 198, __extension__ __PRETTY_FUNCTION__))
# 198 "oio-unix.c"
                           ;

  
# 200 "oio-unix.c" 3 4
 ((
# 200 "oio-unix.c"
 !oio_flag_is_set(handle, OIO_CLOSING)
# 200 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 200 "oio-unix.c"
 "!oio_flag_is_set(handle, OIO_CLOSING)"
# 200 "oio-unix.c" 3 4
 , "oio-unix.c", 200, __extension__ __PRETTY_FUNCTION__))
# 200 "oio-unix.c"
                                              ;

  if (handle->accepted_fd >= 0) {
    ev_io_stop(ev_default_loop (0), &handle->read_watcher);
    return;
  }

  while (1) {
    struct sockaddr addr = { 0 };
    socklen_t addrlen = 0;

    
# 211 "oio-unix.c" 3 4
   ((
# 211 "oio-unix.c"
   handle->accepted_fd < 0
# 211 "oio-unix.c" 3 4
   ) ? (void) (0) : __assert_fail (
# 211 "oio-unix.c"
   "handle->accepted_fd < 0"
# 211 "oio-unix.c" 3 4
   , "oio-unix.c", 211, __extension__ __PRETTY_FUNCTION__))
# 211 "oio-unix.c"
                                  ;
    int fd = accept(handle->fd, &addr, &addrlen);

    if (fd < 0) {
      if (
# 215 "oio-unix.c" 3 4
         (*__errno_location ()) 
# 215 "oio-unix.c"
               == 
# 215 "oio-unix.c" 3 4
                  11
# 215 "oio-unix.c"
                        ) {

        return;
      } else if (
# 218 "oio-unix.c" 3 4
                (*__errno_location ()) 
# 218 "oio-unix.c"
                      == 
# 218 "oio-unix.c" 3 4
                         24
# 218 "oio-unix.c"
                               ) {

        return;
      } else {
        handle->err = oio_err_new(handle, 
# 222 "oio-unix.c" 3 4
                                         (*__errno_location ())
# 222 "oio-unix.c"
                                              );
        oio_close(handle);
      }

    } else {
      handle->accepted_fd = fd;
      handle->accept_cb(handle);
      if (handle->accepted_fd >= 0) {

        ev_io_stop(ev_default_loop (0), &handle->read_watcher);
        return;
      }
    }
  }
}


int oio_tcp_handle_accept(oio_handle* server, oio_handle* client,
    oio_close_cb close_cb, void* data) {
  if (server->accepted_fd < 0) {
    return -1;
  }

  if (oio_tcp_handle_init(client, close_cb, data)) {
    return -1;
  }

  if (oio_tcp_open(client, server->accepted_fd)) {

    server->accepted_fd = -1;
    close(server->accepted_fd);
    return -1;
  } else {
    server->accepted_fd = -1;
    ev_io_start(ev_default_loop (0), &server->read_watcher);
    return 0;
  }
}


int oio_listen(oio_handle* handle, int backlog, oio_accept_cb cb) {
  
# 263 "oio-unix.c" 3 4
 ((
# 263 "oio-unix.c"
 handle->fd >= 0
# 263 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 263 "oio-unix.c"
 "handle->fd >= 0"
# 263 "oio-unix.c" 3 4
 , "oio-unix.c", 263, __extension__ __PRETTY_FUNCTION__))
# 263 "oio-unix.c"
                        ;

  int r = listen(handle->fd, backlog);
  if (r < 0) {
    return oio_err_new(handle, 
# 267 "oio-unix.c" 3 4
                              (*__errno_location ())
# 267 "oio-unix.c"
                                   );
  }

  handle->accept_cb = cb;


  do { (&handle->read_watcher)->fd = (handle->fd); (&handle->read_watcher)->events = (EV_READ) | EV__IOFDSET; } while (0);
  (&handle->read_watcher)->cb = (oio__server_io);
  ev_io_start(ev_default_loop (0), &handle->read_watcher);

  return 0;
}


void oio_finish_close(oio_handle* handle) {
  
# 282 "oio-unix.c" 3 4
 ((
# 282 "oio-unix.c"
 oio_flag_is_set(handle, OIO_CLOSING)
# 282 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 282 "oio-unix.c"
 "oio_flag_is_set(handle, OIO_CLOSING)"
# 282 "oio-unix.c" 3 4
 , "oio-unix.c", 282, __extension__ __PRETTY_FUNCTION__))
# 282 "oio-unix.c"
                                             ;
  
# 283 "oio-unix.c" 3 4
 ((
# 283 "oio-unix.c"
 !oio_flag_is_set(handle, OIO_CLOSED)
# 283 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 283 "oio-unix.c"
 "!oio_flag_is_set(handle, OIO_CLOSED)"
# 283 "oio-unix.c" 3 4
 , "oio-unix.c", 283, __extension__ __PRETTY_FUNCTION__))
# 283 "oio-unix.c"
                                             ;
  oio_flag_set(handle, OIO_CLOSED);

  ev_io_stop(ev_default_loop (0), &handle->read_watcher);
  ev_io_stop(ev_default_loop (0), &handle->write_watcher);
  ev_idle_stop(ev_default_loop (0), &handle->next_watcher);

  close(handle->fd);

  handle->fd = -1;

  if (handle->accepted_fd >= 0) {
    close(handle->accepted_fd);
    handle->accepted_fd = -1;
  }

  if (handle->close_cb) {
    handle->close_cb(handle, 0);
  }
}


oio_req* oio_read_reqs_head(oio_handle* handle) {
  ngx_queue_t* q = (&(handle->read_reqs))->next;
  if (!q) {
    return 
# 308 "oio-unix.c" 3 4
          ((void *)0)
# 308 "oio-unix.c"
              ;
  }

  oio_req* req = (struct oio_req_s *) ((unsigned char *) q - 
# 311 "oio-unix.c" 3 4
                __builtin_offsetof (
# 311 "oio-unix.c"
                struct oio_req_s
# 311 "oio-unix.c" 3 4
                , 
# 311 "oio-unix.c"
                read_reqs
# 311 "oio-unix.c" 3 4
                )
# 311 "oio-unix.c"
                );
  
# 312 "oio-unix.c" 3 4
 ((
# 312 "oio-unix.c"
 req
# 312 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 312 "oio-unix.c"
 "req"
# 312 "oio-unix.c" 3 4
 , "oio-unix.c", 312, __extension__ __PRETTY_FUNCTION__))
# 312 "oio-unix.c"
            ;

  return req;
}


int oio_read_reqs_empty(oio_handle* handle) {
  return (&(handle->read_reqs) == (&(handle->read_reqs))->prev);
}


void oio__next(struct ev_loop *loop, ev_idle* watcher, int revents) {
  oio_handle* handle = watcher->data;
  
# 325 "oio-unix.c" 3 4
 ((
# 325 "oio-unix.c"
 watcher == &handle->next_watcher
# 325 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 325 "oio-unix.c"
 "watcher == &handle->next_watcher"
# 325 "oio-unix.c" 3 4
 , "oio-unix.c", 325, __extension__ __PRETTY_FUNCTION__))
# 325 "oio-unix.c"
                                         ;
  
# 326 "oio-unix.c" 3 4
 ((
# 326 "oio-unix.c"
 revents == EV_IDLE
# 326 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 326 "oio-unix.c"
 "revents == EV_IDLE"
# 326 "oio-unix.c" 3 4
 , "oio-unix.c", 326, __extension__ __PRETTY_FUNCTION__))
# 326 "oio-unix.c"
                           ;




  
# 331 "oio-unix.c" 3 4
 ((
# 331 "oio-unix.c"
 oio_flag_is_set(handle, OIO_CLOSING)
# 331 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 331 "oio-unix.c"
 "oio_flag_is_set(handle, OIO_CLOSING)"
# 331 "oio-unix.c" 3 4
 , "oio-unix.c", 331, __extension__ __PRETTY_FUNCTION__))
# 331 "oio-unix.c"
                                             ;
  oio_finish_close(handle);
}


void oio__read(oio_handle* handle) {
  int errorno;
  
# 338 "oio-unix.c" 3 4
 ((
# 338 "oio-unix.c"
 handle->fd >= 0
# 338 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 338 "oio-unix.c"
 "handle->fd >= 0"
# 338 "oio-unix.c" 3 4
 , "oio-unix.c", 338, __extension__ __PRETTY_FUNCTION__))
# 338 "oio-unix.c"
                        ;




  oio_req* req = oio_read_reqs_head(handle);
  if (!req) {
    ev_io_stop(ev_default_loop (0), &handle->read_watcher);
    return;
  }




  struct iovec* iov = (struct iovec*) req->read_bufs;
  int iovcnt = req->read_bufcnt;

  
# 355 "oio-unix.c" 3 4
 ((
# 355 "oio-unix.c"
 iov
# 355 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 355 "oio-unix.c"
 "iov"
# 355 "oio-unix.c" 3 4
 , "oio-unix.c", 355, __extension__ __PRETTY_FUNCTION__))
# 355 "oio-unix.c"
            ;
  
# 356 "oio-unix.c" 3 4
 ((
# 356 "oio-unix.c"
 iovcnt > 0
# 356 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 356 "oio-unix.c"
 "iovcnt > 0"
# 356 "oio-unix.c" 3 4
 , "oio-unix.c", 356, __extension__ __PRETTY_FUNCTION__))
# 356 "oio-unix.c"
                   ;



  ssize_t nread = readv(handle->fd, iov, iovcnt);
  errorno = 
# 361 "oio-unix.c" 3 4
           (*__errno_location ())
# 361 "oio-unix.c"
                ;

  oio_read_cb cb = req->cb;

  if (nread < 0) {
    if (errorno == 
# 366 "oio-unix.c" 3 4
                  11
# 366 "oio-unix.c"
                        ) {

      
# 368 "oio-unix.c" 3 4
     ((
# 368 "oio-unix.c"
     (0 + ((ev_watcher *)(void *)(&handle->read_watcher))->active)
# 368 "oio-unix.c" 3 4
     ) ? (void) (0) : __assert_fail (
# 368 "oio-unix.c"
     "ev_is_active(&handle->read_watcher)"
# 368 "oio-unix.c" 3 4
     , "oio-unix.c", 368, __extension__ __PRETTY_FUNCTION__))
# 368 "oio-unix.c"
                                                ;
      ev_io_start(ev_default_loop (0), &handle->read_watcher);
    } else {
      oio_err err = oio_err_new(handle, errorno);
      if (cb) {
        cb(req, 0);
      }
      handle->err = err;
      oio_close(handle);
    }
  } else {



    (&req->read_reqs)->next->prev = (&req->read_reqs)->prev; (&req->read_reqs)->prev->next = (&req->read_reqs)->next;

    free(req->read_bufs);
    req->read_bufs = 
# 385 "oio-unix.c" 3 4
                    ((void *)0)
# 385 "oio-unix.c"
                        ;


    if (cb) {
      cb(req, nread);
    }

    if (oio_read_reqs_empty(handle)) {
      ev_io_stop(ev_default_loop (0), &handle->read_watcher);
    }
  }
}


void oio_tcp_io(struct ev_loop *loop, ev_io* watcher, int revents) {
  oio_handle* handle = watcher->data;
  
# 401 "oio-unix.c" 3 4
 ((
# 401 "oio-unix.c"
 watcher == &handle->read_watcher || watcher == &handle->write_watcher
# 401 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 401 "oio-unix.c"
 "watcher == &handle->read_watcher || watcher == &handle->write_watcher"
# 401 "oio-unix.c" 3 4
 , "oio-unix.c", 401, __extension__ __PRETTY_FUNCTION__))
                                           
# 402 "oio-unix.c"
                                          ;

  
# 404 "oio-unix.c" 3 4
 ((
# 404 "oio-unix.c"
 handle->fd >= 0
# 404 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 404 "oio-unix.c"
 "handle->fd >= 0"
# 404 "oio-unix.c" 3 4
 , "oio-unix.c", 404, __extension__ __PRETTY_FUNCTION__))
# 404 "oio-unix.c"
                        ;

  
# 406 "oio-unix.c" 3 4
 ((
# 406 "oio-unix.c"
 !oio_flag_is_set(handle, OIO_CLOSING)
# 406 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 406 "oio-unix.c"
 "!oio_flag_is_set(handle, OIO_CLOSING)"
# 406 "oio-unix.c" 3 4
 , "oio-unix.c", 406, __extension__ __PRETTY_FUNCTION__))
# 406 "oio-unix.c"
                                              ;

  if (handle->connect_req) {
    oio_tcp_connect(handle);
  } else {
    if (revents & EV_READ) {
      oio__read(handle);
    }

    if (revents & EV_WRITE) {

      ev_io_stop(ev_default_loop (0), &handle->write_watcher);
    }
  }
}







void oio_tcp_connect(oio_handle* handle) {
  
# 429 "oio-unix.c" 3 4
 ((
# 429 "oio-unix.c"
 handle->fd >= 0
# 429 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 429 "oio-unix.c"
 "handle->fd >= 0"
# 429 "oio-unix.c" 3 4
 , "oio-unix.c", 429, __extension__ __PRETTY_FUNCTION__))
# 429 "oio-unix.c"
                        ;

  oio_req* req = handle->connect_req;
  
# 432 "oio-unix.c" 3 4
 ((
# 432 "oio-unix.c"
 req
# 432 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 432 "oio-unix.c"
 "req"
# 432 "oio-unix.c" 3 4
 , "oio-unix.c", 432, __extension__ __PRETTY_FUNCTION__))
# 432 "oio-unix.c"
            ;

  int error;
  socklen_t errorsize = sizeof(int);
  getsockopt(handle->fd, 
# 436 "oio-unix.c" 3 4
                        1
# 436 "oio-unix.c"
                                  , 
# 436 "oio-unix.c" 3 4
                                    4
# 436 "oio-unix.c"
                                            , &error, &errorsize);

  if (!error) {
    ev_io_start(ev_default_loop (0), &handle->read_watcher);


    handle->connect_req = 
# 442 "oio-unix.c" 3 4
                         ((void *)0)
# 442 "oio-unix.c"
                             ;
    oio_connect_cb connect_cb = req->cb;
    if (connect_cb) {
      connect_cb(req, 0);
    }

  } else if (error == 
# 448 "oio-unix.c" 3 4
                     115
# 448 "oio-unix.c"
                                ) {

    return;

  } else {
    oio_err err = oio_err_new(handle, error);

    if (req->connect_cb) {
      req->connect_cb(req, err);
    }

    handle->err = err;
    oio_close(handle);
  }
}


int oio_connect(oio_req *req, struct sockaddr* addr) {
  oio_handle* handle = req->handle;

  if (handle->fd <= 0) {
    int fd = socket(
# 469 "oio-unix.c" 3 4
                   2
# 469 "oio-unix.c"
                          , 
# 469 "oio-unix.c" 3 4
                            SOCK_STREAM
# 469 "oio-unix.c"
                                       , 0);
    if (fd < 0) {
      oio_err_new(handle, 
# 471 "oio-unix.c" 3 4
                         (*__errno_location ())
# 471 "oio-unix.c"
                              );
      return -1;
    }

    if (oio_tcp_open(handle, fd)) {
      close(fd);
      return -2;
    }
  }

  req->type = OIO_CONNECT;
  (&req->read_reqs)->prev = &req->read_reqs; (&req->read_reqs)->next = &req->read_reqs;

  if (handle->connect_req) {
    return oio_err_new(handle, 
# 485 "oio-unix.c" 3 4
                              114
# 485 "oio-unix.c"
                                      );
  }

  if (handle->type != OIO_TCP) {
    return oio_err_new(handle, 
# 489 "oio-unix.c" 3 4
                              88
# 489 "oio-unix.c"
                                      );
  }

  handle->connect_req = req;

  int addrsize = sizeof(struct sockaddr_in);

  int r = connect(handle->fd, addr, addrsize);
  if (r != 0 && 
# 497 "oio-unix.c" 3 4
               (*__errno_location ()) 
# 497 "oio-unix.c"
                     != 
# 497 "oio-unix.c" 3 4
                        115
# 497 "oio-unix.c"
                                   ) {
    return oio_err_new(handle, r);
  }

  
# 501 "oio-unix.c" 3 4
 ((
# 501 "oio-unix.c"
 handle->write_watcher.data == handle
# 501 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 501 "oio-unix.c"
 "handle->write_watcher.data == handle"
# 501 "oio-unix.c" 3 4
 , "oio-unix.c", 501, __extension__ __PRETTY_FUNCTION__))
# 501 "oio-unix.c"
                                             ;
  ev_io_start(ev_default_loop (0), &handle->write_watcher);

  return 0;
}


int oio_write(oio_req *req, oio_buf* bufs, int bufcnt) {
  oio_handle* handle = req->handle;
  
# 510 "oio-unix.c" 3 4
 ((
# 510 "oio-unix.c"
 handle->fd >= 0
# 510 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 510 "oio-unix.c"
 "handle->fd >= 0"
# 510 "oio-unix.c" 3 4
 , "oio-unix.c", 510, __extension__ __PRETTY_FUNCTION__))
# 510 "oio-unix.c"
                        ;
  ssize_t r;
  int errorno;

  (&(req->read_reqs))->prev = &(req->read_reqs); (&(req->read_reqs))->next = &(req->read_reqs);
  req->type = OIO_WRITE;

  r = writev(handle->fd, (struct iovec*)bufs, bufcnt);
  errorno = 
# 518 "oio-unix.c" 3 4
           (*__errno_location ())
# 518 "oio-unix.c"
                ;

  if (r < 0) {
    
# 521 "oio-unix.c" 3 4
   ((
# 521 "oio-unix.c"
   errorno != 
# 521 "oio-unix.c" 3 4
   11 
# 521 "oio-unix.c"
   && "write queueing not yet supported"
# 521 "oio-unix.c" 3 4
   ) ? (void) (0) : __assert_fail (
# 521 "oio-unix.c"
   "errorno != EAGAIN && \"write queueing not yet supported\""
# 521 "oio-unix.c" 3 4
   , "oio-unix.c", 521, __extension__ __PRETTY_FUNCTION__))
# 521 "oio-unix.c"
                                                                  ;
    return oio_err_new(handle, r);
  } else {
    if (req && req->cb) {
      oio_write_cb cb = req->cb;
      cb(req);
    }
    return 0;
  }
}


int oio_write2(oio_req* req, const char* msg) {
  size_t len = strnlen(msg, 1024 * 1024);
  oio_buf b;
  b.base = (char*)msg;
  b.len = len;
  return oio_write(req, &b, 1);
}


void oio__timeout(struct ev_loop *loop, ev_timer* watcher, int revents) {
  oio_req* req = watcher->data;
  
# 544 "oio-unix.c" 3 4
 ((
# 544 "oio-unix.c"
 watcher == &req->timer
# 544 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 544 "oio-unix.c"
 "watcher == &req->timer"
# 544 "oio-unix.c" 3 4
 , "oio-unix.c", 544, __extension__ __PRETTY_FUNCTION__))
# 544 "oio-unix.c"
                               ;
  
# 545 "oio-unix.c" 3 4
 ((
# 545 "oio-unix.c"
 EV_TIMER & revents
# 545 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 545 "oio-unix.c"
 "EV_TIMER & revents"
# 545 "oio-unix.c" 3 4
 , "oio-unix.c", 545, __extension__ __PRETTY_FUNCTION__))
# 545 "oio-unix.c"
                           ;


  
# 548 "oio-unix.c" 3 4
 ((
# 548 "oio-unix.c"
 !(0 + ((ev_watcher *)(void *)(watcher))->active)
# 548 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 548 "oio-unix.c"
 "!ev_is_active(watcher)"
# 548 "oio-unix.c" 3 4
 , "oio-unix.c", 548, __extension__ __PRETTY_FUNCTION__))
# 548 "oio-unix.c"
                               ;
  
# 549 "oio-unix.c" 3 4
 ((
# 549 "oio-unix.c"
 !(0 + ((ev_watcher *)(void *)(watcher))->pending)
# 549 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 549 "oio-unix.c"
 "!ev_is_pending(watcher)"
# 549 "oio-unix.c" 3 4
 , "oio-unix.c", 549, __extension__ __PRETTY_FUNCTION__))
# 549 "oio-unix.c"
                                ;

  if (req->cb) {
    oio_timer_cb cb = req->cb;
    cb(req, 0);
  }
}


void oio_update_time() {
  ev_now_update(ev_default_loop_uc_ ());
}


int64_t oio_now() {
  return (int64_t)(ev_now(ev_default_loop_uc_ ()) * 1000);
}


int oio_timeout(oio_req *req, int64_t timeout) {
  do { do { ((ev_watcher *)(void *)((&req->timer)))->active = ((ev_watcher *)(void *)((&req->timer)))->pending = 0; ( (ev_watcher *)(void *)(((&req->timer))))->priority = (0); (((&req->timer)))->cb = ((oio__timeout)); } while (0); do { ((ev_watcher_time *)((&req->timer)))->at = ((timeout / 1000.0)); ((&req->timer))->repeat = ((0.0)); } while (0); } while (0);
  ev_timer_start(ev_default_loop_uc_ (), &req->timer);
  req->timer.data = req;
  return 0;
}


int oio_read(oio_req *req, oio_buf* bufs, int bufcnt) {
  oio_handle* handle = req->handle;
  ssize_t nread = -1;
  int errorno = 
# 579 "oio-unix.c" 3 4
               11
# 579 "oio-unix.c"
                     ;
  oio_read_cb cb = req->cb;

  
# 582 "oio-unix.c" 3 4
 ((
# 582 "oio-unix.c"
 handle->fd >= 0
# 582 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 582 "oio-unix.c"
 "handle->fd >= 0"
# 582 "oio-unix.c" 3 4
 , "oio-unix.c", 582, __extension__ __PRETTY_FUNCTION__))
# 582 "oio-unix.c"
                        ;

  if ((&handle->read_reqs == (&handle->read_reqs)->prev)) {

    nread = readv(handle->fd, (struct iovec*) bufs, bufcnt);
    errorno = 
# 587 "oio-unix.c" 3 4
             (*__errno_location ())
# 587 "oio-unix.c"
                  ;
  }




  
# 593 "oio-unix.c" 3 4
 ((
# 593 "oio-unix.c"
 (&req->read_reqs == (&req->read_reqs)->prev)
# 593 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 593 "oio-unix.c"
 "ngx_queue_empty(&req->read_reqs)"
# 593 "oio-unix.c" 3 4
 , "oio-unix.c", 593, __extension__ __PRETTY_FUNCTION__))
# 593 "oio-unix.c"
                                         ;
  
# 594 "oio-unix.c" 3 4
 ((
# 594 "oio-unix.c"
 req->type == OIO_UNKNOWN_REQ
# 594 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 594 "oio-unix.c"
 "req->type == OIO_UNKNOWN_REQ"
# 594 "oio-unix.c" 3 4
 , "oio-unix.c", 594, __extension__ __PRETTY_FUNCTION__))
# 594 "oio-unix.c"
                                     ;
  req->type = OIO_READ;

  if (nread < 0 && errorno != 
# 597 "oio-unix.c" 3 4
                             11
# 597 "oio-unix.c"
                                   ) {

    oio_err err = oio_err_new(handle, errorno);

    if (cb) {
      cb(req, nread);
    }

    return err;
  }

  if (nread >= 0) {

    if (cb) {
      cb(req, nread);
    }
    return 0;
  }


  
# 617 "oio-unix.c" 3 4
 ((
# 617 "oio-unix.c"
 !(&handle->read_reqs == (&handle->read_reqs)->prev) || (nread < 0 && errorno == 
# 617 "oio-unix.c" 3 4
 11
# 617 "oio-unix.c"
 )
# 617 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 617 "oio-unix.c"
 "!ngx_queue_empty(&handle->read_reqs) || (nread < 0 && errorno == EAGAIN)"
# 617 "oio-unix.c" 3 4
 , "oio-unix.c", 617, __extension__ __PRETTY_FUNCTION__))
                                          
# 618 "oio-unix.c"
                                         ;
# 636 "oio-unix.c"
  req->read_bufs = malloc(sizeof(oio_buf) * bufcnt);
  memcpy(req->read_bufs, bufs, bufcnt * sizeof(oio_buf));
  req->read_bufcnt = bufcnt;


  (&req->read_reqs)->prev = (&handle->read_reqs)->prev; (&req->read_reqs)->prev->next = &req->read_reqs; (&req->read_reqs)->next = &handle->read_reqs; (&handle->read_reqs)->prev = &req->read_reqs;

  
# 643 "oio-unix.c" 3 4
 ((
# 643 "oio-unix.c"
 !(&handle->read_reqs == (&handle->read_reqs)->prev)
# 643 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 643 "oio-unix.c"
 "!ngx_queue_empty(&handle->read_reqs)"
# 643 "oio-unix.c" 3 4
 , "oio-unix.c", 643, __extension__ __PRETTY_FUNCTION__))
# 643 "oio-unix.c"
                                             ;
  
# 644 "oio-unix.c" 3 4
 ((
# 644 "oio-unix.c"
 handle->read_watcher.data == handle
# 644 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 644 "oio-unix.c"
 "handle->read_watcher.data == handle"
# 644 "oio-unix.c" 3 4
 , "oio-unix.c", 644, __extension__ __PRETTY_FUNCTION__))
# 644 "oio-unix.c"
                                            ;
  
# 645 "oio-unix.c" 3 4
 ((
# 645 "oio-unix.c"
 handle->read_watcher.fd == handle->fd
# 645 "oio-unix.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 645 "oio-unix.c"
 "handle->read_watcher.fd == handle->fd"
# 645 "oio-unix.c" 3 4
 , "oio-unix.c", 645, __extension__ __PRETTY_FUNCTION__))
# 645 "oio-unix.c"
                                              ;

  ev_io_start(ev_default_loop (0), &handle->read_watcher);

  return 0;
}


void oio_free(oio_handle* handle) {
  free(handle);

  return;
}


void oio_req_init(oio_req* req, oio_handle* handle, void* cb) {
  req->type = OIO_UNKNOWN_REQ;
  req->cb = cb;
  req->handle = handle;
  (&req->read_reqs)->prev = &req->read_reqs; (&req->read_reqs)->next = &req->read_reqs;
}
